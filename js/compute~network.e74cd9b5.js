(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["compute~network"],{"200b":function(t,e,n){"use strict";var a=n("b691"),r=n.n(a);r.a},"261e":function(t,e,n){"use strict";n.d(e,"d",function(){return r}),n.d(e,"e",function(){return i}),n.d(e,"a",function(){return o}),n.d(e,"c",function(){return s}),n.d(e,"b",function(){return c});var a=n("b775"),r=function(t){return Object(a["b"])("/network/list",t)},i=function(t){return Object(a["b"])("/network/subnet/list",t)},o=function(t){return Object(a["c"])("/network/create",t)},s=function(t){return Object(a["c"])("/network/edit",t)},c=function(t){return Object(a["a"])("/network/delete",t)}},3614:function(t,e,n){"use strict";n("7f7f"),n("456d"),n("96cf");var a=n("1da1"),r=(n("ac6a"),n("8615"),n("6b54"),n("7514"),n("6762"),n("2fdb"),n("f751"),n("ca00"));e["a"]={data:function(){return{name:"选项",pagination:{},initPagination:{total:0,current:1,pageSize:10,showSizeChanger:!0,pageSizeOptions:["10","20","30","40","50"]},payload:{},url:"/api/demo",allData:[],tempData:[],data:[],loading:!1,selectedRowKeys:[],currRecord:{},searchValues:{}}},computed:{message:function(){var t=this.selectedRowKeys.length;return"已选择 ".concat(t," 项")},columns:function(){return this.$store.state[this.module][this.id].columns},menuOptions:function(){return this.$store.state[this.module][this.id].menuOptions},multiMenuOptions:function(){return this.menuOptions.filter(function(t){return"multi"===t.type})},singleMenuOptions:function(){return this.menuOptions.filter(function(t){return"single"===t.type})}},mounted:function(){this.handleRefresh()},methods:{handleRefresh:function(){this.searchValues&&(this.searchValues=Object.assign({},this.searchValues,{inputValue:""})),this.pagination=Object.assign({},this.pagination,this.initPagination),this.fetch()},handleFilterByStatus:function(){var t=this.searchValues.status;t&&this.tempData.length>0&&(this.tempData="all"===t?this.tempData:this.tempData.filter(function(e){return e.status===t}))},handleFilterByInput:function(){var t=this.searchValues,e=t.type,n=t.inputValue;if(0!==this.tempData.length&&""!==n){var a=n.toLowerCase(),r=this.tempData.filter(function(t){var n=t[e];return"string"===typeof n?n.toLowerCase().includes(a):Array.isArray(n)?n.find(function(t){return t.toLowerCase().includes(a)}):"[object Object]"===n.toString()?Object.values(n).find(function(t){return t.toLowerCase().includes(a)}):void 0});this.tempData=r}},getCurrPageData:function(){var t=this.pagination,e=(t.total,t.current),n=t.pageSize,a=(e-1)*n||0,r=e*n||10;this.tempData=this.tempData.slice(a,r)},handleDATA:function(){var t=this;this.handleClearSelected(),this.tempData=this.allData,this.handleFilterByStatus(),this.handleFilterByInput(),this.pagination=Object.assign({},this.pagination,{total:this.tempData.length}),this.getCurrPageData(),this.loading=!0,setTimeout(function(){t.data=t.tempData,t.loading=!1,t.handleFetchSuccess()},100)},fetch:function(){var t=Object(a["a"])(regeneratorRuntime.mark(function t(){var e,n,a=arguments;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e=a.length>0&&void 0!==a[0]?a[0]:{},this.loading=!0,this.handleClearSelected(),e=this.payload||{},t.prev=4,t.next=7,this.getList(e);case 7:n=t.sent,n.data.forEach(function(t){if(t.id&&(t.shortID=t.id.substring(0,8)),t.createDate){var e=t.createDate;t.timestamp=Object(r["d"])(e)}t.status&&(t.status=t.status.toLowerCase()),Object.keys(t).forEach(function(e){var n=t[e],a="无";[null,void 0,""].includes(n)&&(t[e]=a),n&&Array.isArray(n)&&0===n.length&&(t[e]=[])})}),this.allData=this.handleParseData?this.handleParseData(n.data):n.data,this.handleDATA(),t.next=16;break;case 13:t.prev=13,t.t0=t["catch"](4),404===t.t0.response.status&&(this.data=[]);case 16:return t.prev=16,this.loading=!1,t.finish(16);case 19:case"end":return t.stop()}},t,this,[[4,13,16,19]])}));function e(){return t.apply(this,arguments)}return e}(),handleFetchSuccess:function(){},handleTableChange:function(t,e,n){this.pagination=Object.assign({},this.pagination,t),this.handleDATA()},onTableSelectChange:function(t){this.selectedRowKeys=t},handleClearSelected:function(){this.selectedRowKeys=[]},handleMultiMenuClick:function(t){0!==this.selectedRowKeys.length?this.handleShowModal(t):this.$message.info("请先选择您要操作的".concat(this.name||"数据"))},handleSingleMenuClick:function(t,e){this.currRecord=e,this.handleShowModal(t)},handleShowModal:function(t){this.$store.commit("".concat(this.id,"/toggleModalVisible"),t)},getSearchData:function(){}}}},"4aa6":function(t,e,n){"use strict";e["a"]={subnet:{status:{up:"启用",down:"关停"}}}},"504c":function(t,e,n){var a=n("0d58"),r=n("6821"),i=n("52a7").f;t.exports=function(t){return function(e){var n,o=r(e),s=a(o),c=s.length,u=0,l=[];while(c>u)i.call(o,n=s[u++])&&l.push(t?[n,o[n]]:o[n]);return l}}},"54ea":function(t,e,n){"use strict";n.d(e,"d",function(){return r}),n.d(e,"a",function(){return i}),n.d(e,"b",function(){return o}),n.d(e,"e",function(){return s}),n.d(e,"c",function(){return c});var a=n("b775"),r=function(t){return Object(a["b"])("/network/publicIP/list",t)},i=function(t){return Object(a["c"])("/network/publicIP/assign",t)},o=function(t){return Object(a["c"])("/network/publicIP/bind",t)},s=function(t){return Object(a["c"])("/network/publicIP/unbind",t)},c=function(t){return Object(a["c"])("/network/publicIP/release",t)}},"599a":function(t,e,n){"use strict";var a=n("eb59"),r=n.n(a);r.a},"7b00":function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t.visible?n("a-modal",{attrs:{visible:t.visible,confirmLoading:t.confirmLoading,title:t.titleList[t.currStep].title,okText:"确定"},on:{cancel:t.handleCancel,ok:t.handleCreate}},[n("a-form",{directives:[{name:"show",rawName:"v-show",value:0===t.currStep,expression:"currStep === 0"}],attrs:{form:t.form0}},[n("a-form-item",{attrs:{labelCol:t.formItemLayout.labelCol,wrapperCol:t.formItemLayout.wrapperCol,label:"网络名称"}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["networkName",{rules:[{required:!0,message:"请填写网络名称!"},t.rulesObj.name]}],expression:"[\n            'networkName',\n            {\n              rules: [\n                { required: true, message: '请填写网络名称!' },\n                rulesObj.name,\n              ]\n            }\n          ]"}],attrs:{placeholder:"网络名称"}})],1),n("a-form-item",{attrs:{labelCol:t.formItemLayout.labelCol,wrapperCol:{span:14,offset:8},label:""}},[n("a-checkbox",{attrs:{checked:""}},[t._v("启用管理员状态")])],1),n("a-form-item",{attrs:{labelCol:t.formItemLayout.labelCol,wrapperCol:{span:14,offset:8},label:""}},[n("a-checkbox",{attrs:{checked:""}},[t._v("创建子网")])],1)],1),n("a-form",{directives:[{name:"show",rawName:"v-show",value:1===t.currStep,expression:"currStep === 1"}],attrs:{form:t.form1}},[n("a-form-item",{attrs:{labelCol:t.formItemLayout.labelCol,wrapperCol:t.formItemLayout.wrapperCol,label:"IP版本"}},[n("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["ipVersion",{initialValue:"IPv4",rules:[{required:!0,message:"请选择IP版本"}]}],expression:"[\n            'ipVersion',\n            {\n              initialValue: 'IPv4',\n              rules: [{ required: true, message: '请选择IP版本' }]\n            }\n          ]"}]},[n("a-select-option",{attrs:{value:"IPv4"}},[t._v("IPv4")]),n("a-select-option",{attrs:{value:"IPv6"}},[t._v("IPv6")])],1)],1),n("a-form-item",{attrs:{labelCol:t.formItemLayout.labelCol,wrapperCol:t.formItemLayout.wrapperCol,label:"网络地址段"}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["segmentNetwork",{rules:[{required:!0,message:"请填写网络地址段!"}]}],expression:"[\n            'segmentNetwork',\n            {rules: [{ required: true, message: '请填写网络地址段!' }]}\n          ]"}],attrs:{placeholder:"网络地址段"}}),n("a-tooltip",{staticStyle:{position:"absolute",top:"50%",right:"-5px",transform:"translate(100%, -50%)"}},[n("template",{slot:"title"},[t._v("\n            CIDR格式的网络地址 (例如 192.168.0.0/24, 2001:DB8::/48)\n          ")]),n("a-icon",{attrs:{type:"info-circle"}})],2)],1),n("a-row",{attrs:{type:"flex"}},[n("a-col",{attrs:{offset:8,span:14}},[n("div",{staticStyle:{display:"block","text-align":"right"}},[n("a",{on:{click:function(e){t.showMore=!t.showMore}}},[t._v("\n              高级"),n("a-icon",{staticStyle:{"margin-left":"5px"},attrs:{type:t.showMore?"up":"down"}})],1)])])],1),t.showMore?[n("a-form-item",{attrs:{labelCol:t.formItemLayout.labelCol,wrapperCol:{span:14,offset:8},label:""}},[n("a-checkbox",{directives:[{name:"decorator",rawName:"v-decorator",value:["isDisableGateway"],expression:"[\n              'isDisableGateway',\n            ]"}],on:{change:t.onChangeDisableGateway}},[t._v("\n            禁用网关\n          ")])],1),n("a-form-item",{attrs:{labelCol:t.formItemLayout.labelCol,wrapperCol:{span:14,offset:8},label:""}},[n("a-checkbox",{attrs:{checked:""}},[t._v("激活DHCP")])],1),t.formValues.isDisableGateway?t._e():n("a-form-item",{attrs:{labelCol:t.formItemLayout.labelCol,wrapperCol:t.formItemLayout.wrapperCol,label:"网关IP"}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["gatewayIp"],expression:"[\n              'gatewayIp',\n            ]"}],attrs:{placeholder:"网关IP"}})],1),n("a-form-item",{staticStyle:{"margin-top":"24px"},attrs:{labelCol:t.formItemLayout.labelCol,wrapperCol:t.formItemLayout.wrapperCol,label:"分配地址池"}},[n("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["addressPool"],expression:"[\n              'addressPool',\n            ]"}],attrs:{rows:4,placeholder:"示例：192.168.100.1，192.168.100.10；每行一条记录，使用逗号分割。"}})],1),n("a-form-item",{attrs:{labelCol:t.formItemLayout.labelCol,wrapperCol:t.formItemLayout.wrapperCol,label:"DNS服务器"}},[n("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["dnsServer"],expression:"[\n              'dnsServer',\n            ]"}],attrs:{rows:4,placeholder:"示例：114.114.114.114，每行一个地址，使用逗号分割。"}})],1),n("a-form-item",{attrs:{labelCol:t.formItemLayout.labelCol,wrapperCol:t.formItemLayout.wrapperCol,label:"主机路由"}},[n("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["hostRouter"],expression:"[\n              'hostRouter',\n            ]"}],attrs:{rows:4,placeholder:"主机额外增加的路由，格式：目的CIDR 下一跳地址；示例：192.168.1.0/24，10.10.10.10； 每行一条记录，使用逗号分割。"}})],1)]:t._e()],2),n("template",{slot:"footer"},[0!==t.currStep?n("a-button",{on:{click:t.handlePrevStep}},[t._v("上一步")]):t._e(),1!==t.currStep?n("a-button",{on:{click:t.handleNextStep}},[t._v("下一步")]):t._e(),1===t.currStep?n("a-button",{attrs:{type:"primary",loading:t.confirmLoading},on:{click:t.handleNextStep}},[t._v("\n        创建\n      ")]):t._e()],1)],2):t._e()],1)},r=[],i=(n("f751"),n("ac6a"),n("96cf"),n("1da1")),o=n("e0ae"),s=n("0792"),c=n("261e"),u={mixins:[o["a"],o["b"]],data:function(){return{fetchAPI:c["a"],rulesObj:s["a"],form0:this.$form.createForm(this),form1:this.$form.createForm(this),name:"create",type:"0",titleList:[{title:"新建网络",data:{}},{title:"配置网络网段",data:{}}],currStep:0,loading:!1,showMore:!1}},methods:{onShow:function(){this.currStep=0,this.formValues={isEnableAdministrator:1,isCreateSubnetwork:1,isDisableGateway:!1,isActivateDHCP:1}},onChangeDisableGateway:function(t){this.formValues.isDisableGateway=t.target.checked},onChange:function(t){this.type=t.target.value},handlePrevStep:function(){this.currStep>0&&this.currStep--},handleNextStep:function(){var t=Object(i["a"])(regeneratorRuntime.mark(function t(){var e,n=this;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this._handleValidate();case 3:e=t.sent,e&&this.currStep+1<this.titleList.length?this.currStep++:this.currStep+1===this.titleList.length&&(this.titleList.forEach(function(t){Object.assign(n.formValues,t.data)}),this.formValues.isDisableGateway=this.formValues.isDisableGateway?1:0,this.handleFetch()),t.next=9;break;case 7:t.prev=7,t.t0=t["catch"](0);case 9:case"end":return t.stop()}},t,this,[[0,7]])}));function e(){return t.apply(this,arguments)}return e}(),_handleValidate:function(){var t=this;return new Promise(function(e,n){t["form"+t.currStep].validateFieldsAndScroll(function(a,r){a?n(a):(console.log("Received values of form: ",r),Object.assign(t.titleList[t.currStep].data,r),e(!0))})})}}},l=u,h=n("2877"),f=Object(h["a"])(l,a,r,!1,null,null,null);e["a"]=f.exports},8615:function(t,e,n){var a=n("5ca1"),r=n("504c")(!1);a(a.S,"Object",{values:function(t){return r(t)}})},b691:function(t,e,n){},d8c3:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",[n("page-header",[t._t("header")],2),n("a-layout-content",{staticClass:"page-content"},[t._t("default")],2)],1)},r=[],i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"page-header"},[n("div",{staticClass:"page-header-detail"},[n("div",{staticClass:"title"},[n("h1",[t._v(t._s(t.title))])]),n("div",{staticClass:"desc"},[t._t("default")],2)])])},o=[],s={name:"",components:{},computed:{},created:function(){this.getTitle()},data:function(){return{title:""}},methods:{getTitle:function(){var t=this.$route.matched;this.title=t.length>2?t[2].meta.title:this.$route.meta.title}}},c=s,u=(n("200b"),n("2877")),l=Object(u["a"])(c,i,o,!1,null,null,null),h=l.exports,f={name:"",components:{PageHeader:h},computed:{},data:function(){return{}},methods:{}},d=f,p=(n("599a"),Object(u["a"])(d,a,r,!1,null,null,null));e["a"]=p.exports},e0ae:function(t,e,n){"use strict";n.d(e,"a",function(){return i}),n.d(e,"b",function(){return o});n("f751"),n("ac6a"),n("96cf");var a=n("1da1"),r=n("ade3"),i=(n("7f7f"),{data:function(){return{module:"",bodyStyle:{"max-height":"400px",overflow:"auto"},radioStyle:{display:"block",height:"30px",lineHeight:"30px"},confirmLoading:!1,formValues:{},currRecord:{},fetchAPI:function(){},isRefreshParentTable:!0,loop:!1,list:[],handleItemCount:0}},computed:{visible:function(){var t=this.$store.getters["".concat(this.$parent.id,"/getVisibleById")](this.name);return t}},watch:{visible:function(t,e){t?(this.currRecord=this.$parent.currRecord||{},this.formValues={},this.form&&this.form.resetFields(),this.bindId(),this.onShow()):(this.form&&this.form.resetFields(),this.onHidden())}},methods:{bindId:function(){},onShow:function(){},onHidden:function(){},onInputNumberChange:function(t,e){var n=Object(r["a"])({},e,parseInt(t));this.form.setFieldsValue(n)},handleCancel:function(){this.$store.commit("".concat(this.$parent.id,"/toggleModalVisible"),this.name)},handleCreate:function(){this.handleFetch()},handleFetch:function(){var t=Object(a["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(!this.loop){t.next=3;break}return this.handleLoopFetchStart(),t.abrupt("return",!1);case 3:return this.confirmLoading=!0,t.prev=4,t.next=7,this.fetchAPI(this.formValues);case 7:e=t.sent,this.handleFetchSuccess(e),t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](4),this.handleFetchFailed(t.t0);case 14:return t.prev=14,this.confirmLoading=!1,t.finish(14);case 17:case"end":return t.stop()}},t,this,[[4,11,14,17]])}));function e(){return t.apply(this,arguments)}return e}(),handleFetchSuccess:function(t){this.handleCancel(),this.openNotification(t),this.handleRefreshParentTable()},handleFetchFailed:function(t){},handleRefreshParentTable:function(){this.isRefreshParentTable&&this.$parent.handleRefresh()},openNotification:function(t){this.$message.success(t.desc||"操作成功")},formatter:function(t,e){return parseInt(e)+" "+t},parser:function(t){return parseInt(t)},handleLoopFetchStart:function(){var t=this;this.list.length&&this.handleItemCount&&(this.confirmLoading=!0,this.list.forEach(function(e){t.handleItemFetch(e)}))},handleLoopFetchEnd:function(){this.confirmLoading=!1,this.$message.success("操作完成"),this.handleRefreshParentTable(),this.handleCancel()},handleItemFetch:function(){var t=Object(a["a"])(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.fetchAPI(e);case 3:t.sent,t.next=8;break;case 6:t.prev=6,t.t0=t["catch"](0);case 8:return t.prev=8,this.handleItemCount=this.handleItemCount-1,0===this.handleItemCount&&this.handleLoopFetchEnd(),t.finish(8);case 12:case"end":return t.stop()}},t,this,[[0,6,8,12]])}));function e(e){return t.apply(this,arguments)}return e}()}}),o={data:function(){return{formItemLayout:{labelCol:{span:8},wrapperCol:{span:14}},form:null}},created:function(){var t=this;this.form=this.$form.createForm(this,{onFieldsChange:function(e,n){t.onFieldsChange(e,n)},onValuesChange:function(e,n,a){t.onValuesChange(e,n,a)}})},methods:{onValuesChange:function(t,e,n){},onFieldsChange:function(){},handleCreate:function(){var t=this;this.form.validateFieldsAndScroll(function(e,n){e||(t.formValues=Object.assign({},t.formValues,n),t.handleFetch())})}}}},eb59:function(t,e,n){},f30f:function(t,e,n){"use strict";n.d(e,"i",function(){return r}),n.d(e,"h",function(){return i}),n.d(e,"g",function(){return o}),n.d(e,"f",function(){return s}),n.d(e,"a",function(){return c}),n.d(e,"c",function(){return u}),n.d(e,"n",function(){return l}),n.d(e,"l",function(){return h}),n.d(e,"k",function(){return f}),n.d(e,"m",function(){return d}),n.d(e,"b",function(){return p}),n.d(e,"j",function(){return m}),n.d(e,"d",function(){return b}),n.d(e,"e",function(){return v});var a=n("b775"),r=function(t){return Object(a["b"])("/compute/instance/list",t)},i=function(t){return Object(a["b"])("/compute/instance/status/".concat(t))},o=function(t){return Object(a["b"])("/compute/instance/network/".concat(t))},s=function(t){return Object(a["b"])("/compute/instance/securityGroup/".concat(t))},c=function(t){return Object(a["c"])("/compute/instance/create",t)},u=function(t){return Object(a["a"])("/compute/instance/delete",t)},l=function(t){return Object(a["c"])("/compute/instance/start",t)},h=function(t){return Object(a["c"])("/compute/instance/shutdown",t)},f=function(t){return Object(a["c"])("/compute/instance/restart",t)},d=function(t){return Object(a["c"])("/compute/instance/softreboot",t)},p=function(t){return Object(a["c"])("/compute/instance/snapshot/create",t)},m=function(t){return Object(a["c"])("/compute/instance/rebuild",t)},b=function(t){return Object(a["c"])("/compute/instance/securitygroup/edit",t)},v=function(t){return Object(a["c"])("/compute/instance/console/enter",t)}}}]);
//# sourceMappingURL=compute~network.e74cd9b5.js.map