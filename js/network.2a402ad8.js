(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["network"],{"12fb":function(e,t,n){"use strict";var a=n("67ab"),r=n.n(a);r.a},"1d8f":function(e,t,n){},"1de9":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[4===e.$route.matched.length?n("router-view"):n("page-layout",[n("div",{attrs:{slot:"header"},slot:"header"},[n("p",[e._v("公网 IP （Elastic IP） 是在互联网上合法的静态 IP 地址。在 YPCloud 系统中，您可以将申请到的公网 IP 地址与任意云主机（包括子网内的云主机）/负载均衡器绑定，并随时可以解绑、再分配到其他资源上。")])]),n("div",{staticClass:"content"},[n("my-content")],1)])],1)},r=[],i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"table-operator",staticStyle:{"margin-bottom":"16px"}},[n("a-row",[n("a-col",[n("a-row",{attrs:{type:"flex",justify:"space-between"}},[n("span",[n("a-button",{staticStyle:{"margin-right":"10px"},attrs:{icon:"sync",disabled:e.loading,title:"刷新"},on:{click:e.handleRefresh}}),n("a-button",{staticStyle:{"margin-right":"10px"},attrs:{type:"primary",icon:"plus"},on:{click:function(t){e.handleSingleMenuClick("create")}}},[e._v("\n              申请IP\n            ")]),n("a-dropdown",{staticStyle:{"margin-right":"10px"}},[n("a-menu",{attrs:{slot:"overlay"},on:{click:function(t){e.handleMultiMenuClick(t.key)}},slot:"overlay"},e._l(e.multiMenuOptions,function(t){return n("a-menu-item",{key:t.id},[e._v("\n                  "+e._s(t.name)+"\n                ")])}),1),n("a-button",{staticStyle:{"margin-left":"8px"}},[e._v("\n                批量操作\n                "),n("a-icon",{attrs:{type:"down"}})],1)],1)],1),n("span",{staticStyle:{display:"inline-flex"}},[n("a-input-group",{staticClass:"compact-search-input",attrs:{compact:""}},[n("a-select",{staticStyle:{width:"90px!important"},on:{change:function(t){return e.searchValues.type=t}},model:{value:e.searchValues.type,callback:function(t){e.$set(e.searchValues,"type",t)},expression:"searchValues.type"}},e._l(e.types,function(t,a){return n("a-select-option",{key:a,attrs:{value:a}},[e._v("\n                  "+e._s(t)+"\n                ")])}),1),n("a-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入"+e.types[e.searchValues.type]+"信息"},on:{pressEnter:e.handleDATA},model:{value:e.searchValues.inputValue,callback:function(t){e.$set(e.searchValues,"inputValue",t)},expression:"searchValues.inputValue"}},[e.searchValues.inputValue?n("a-icon",{attrs:{slot:"suffix",type:"close-circle"},on:{click:function(t){e.searchValues.inputValue=""}},slot:"suffix"}):e._e()],1)],1),n("a-button",{staticStyle:{"margin-left":"8px"},attrs:{type:"primary"},on:{click:e.handleDATA}},[e._v("\n              搜索\n              "),n("a-icon",{attrs:{type:"search"}})],1)],1)])],1)],1)],1),n("a-alert",{staticStyle:{"margin-bottom":"16px"},attrs:{type:"info",showIcon:""}},[n("div",{attrs:{slot:"message"},slot:"message"},[e._v("\n      已选择 \n      "),n("a",{staticStyle:{"font-weight":"600"}},[e._v(e._s(e.selectedRowKeys.length))]),e._v("  项\n      "),n("a",{staticStyle:{"margin-left":"24px"},on:{click:e.handleClearSelected}},[e._v("清空")])])]),n("a-table",{attrs:{rowSelection:{selectedRowKeys:e.selectedRowKeys,onChange:e.onTableSelectChange},columns:e.columns,rowKey:function(e){return e.id},dataSource:e.data,pagination:e.pagination,loading:e.loading},on:{change:e.handleTableChange},scopedSlots:e._u([{key:"operation",fn:function(t,a){return[n("a-button",{staticStyle:{"margin-right":"10px"},attrs:{type:"primary",icon:"edit"},on:{click:function(t){e.handleSingleMenuClick("bind-ip",a)}}},[e._v("\n        绑定IP\n      ")])]}}])}),n("create-modal"),n("bind-ip"),n("free-ip"),n("unbind-ip")],1)},s=[],o=(n("f751"),n("96cf"),n("1da1")),l=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("a-modal",{attrs:{visible:e.visible,confirmLoading:e.confirmLoading,title:"分配公网IP",okText:"确定"},on:{cancel:e.handleCancel,ok:e.handleCreate}},[n("a-form",{attrs:{form:e.form}},[n("a-form-item",{attrs:{labelCol:{span:8},wrapperCol:{span:14},label:"资源池"}},[n("a-spin",{attrs:{spinning:e.$parent.fetchNetworkListLoading}},[n("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["networkId",{rules:[{required:!0,message:"请选择资源池！"}]}],expression:"[\n              'networkId',\n              {\n                rules: [{ required: true, message: '请选择资源池！' }]\n              }\n            ]"}],attrs:{placeholder:"请选择资源池！"}},e._l(e.$parent.networkList,function(t){return n("a-select-option",{key:t.id,attrs:{value:t.id}},[e._v("\n              "+e._s(t.name)+"\n            ")])}),1)],1)],1),n("a-form-item",{attrs:{labelCol:e.formItemLayout.labelCol,wrapperCol:e.formItemLayout.wrapperCol,label:"描述"}},[n("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["description",{rules:[e.rulesObj.desc]}],expression:"[\n            'description',\n            {\n              rules: [\n                rulesObj.desc,\n              ]\n            }\n          ]"}],attrs:{placeholder:"请填写描述"}})],1),n("div",{staticClass:"form-item-container"},[n("a-form-item",{attrs:{labelCol:{span:8},wrapperCol:{span:14},label:"带宽(Mbps)"}},[n("a-slider",{directives:[{name:"decorator",rawName:"v-decorator",value:["bandwidth",{initialValue:e.bandwidth,rules:[{required:!0,message:"请填写带宽"}]}],expression:"[\n              'bandwidth',\n              {\n                initialValue: bandwidth,\n                rules: [{ required: true, message: '请填写带宽' }]\n              }\n            ]"}],attrs:{min:1,max:50,tipFormatter:function(e){return e+"Mb"}},on:{change:e.onSliderChange}})],1),n("a-input-number",{staticClass:"input-number",attrs:{min:1,max:50,value:e.bandwidth},on:{change:e.onInputChange}})],1)],1)],1)],1)},c=[],u=n("e0ae"),d=n("54ea"),h=n("0792"),p={mixins:[u["a"],u["b"]],data:function(){return{rulesObj:h["a"],fetchAPI:d["a"],name:"create",bandwidth:1}},methods:{onShow:function(){this.$parent.networkList.length<=0&&this.$parent.fetchNetworkList(),this.bandwidth=1},onInputChange:function(e){Object.assign(this,{bandwidth:e}),this.form.setFieldsValue({bandwidth:e})},onSliderChange:function(e){Object.assign(this,{bandwidth:e})}}},m=p,f=(n("a4dc"),n("2877")),v=Object(f["a"])(m,l,c,!1,null,null,null),b=v.exports,g=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("a-modal",{attrs:{visible:e.visible,confirmLoading:e.confirmLoading,title:"绑定公网IP",okText:"确定"},on:{cancel:e.handleCancel,ok:e.handleCreate}},["无"===e.currRecord.mappedStaticIp?n("a-form",{attrs:{form:e.form}},[n("a-form-item",{attrs:{labelCol:{span:8},wrapperCol:{span:14},label:"IP地址"}},[n("a-input",{attrs:{value:e.currRecord.ipAddress,disabled:""}})],1),n("a-form-item",{attrs:{labelCol:{span:8},wrapperCol:{span:14},label:"选择待绑定端口"}},[n("a-spin",{attrs:{spinning:e.isFetchInstanceList}},[n("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["portIp",{initialValue:"",rules:[{required:!0,message:"请选择待绑定端口！"}]}],expression:"[\n              'portIp',\n              {\n                initialValue: '',\n                rules: [{ required: true, message: '请选择待绑定端口！' }]\n              }\n            ]"}],attrs:{placeholder:"请选择待绑定端口！"}},e._l(e.selectList,function(t){return n("a-select-option",{key:t.network,attrs:{value:t.network}},[e._v("\n              "+e._s(t.name)+" "+e._s(t.network)+"\n            ")])}),1)],1)],1)],1):[n("p",{staticStyle:{"margin-top":"10px"}},[e._v("每个 IP 只能绑定一个端口，如需绑定其他端口，请先解绑此 IP")]),n("template",{slot:"footer"},[n("a-button",{on:{click:e.handleCancel}},[e._v("取消")])],1)]],2)],1)},y=[],w=(n("7f7f"),n("ac6a"),n("f30f")),x={mixins:[u["a"],u["b"]],data:function(){return{fetchAPI:d["b"],name:"bind-ip",selectList:[],isFetchInstanceList:!1,count:0,len:0}},methods:{onShow:function(){this.fetchIntanceList(),this.formValues={id:this.currRecord.id}},fetchNetwork:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(t){var n,a=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(w["g"])(t.id);case 3:n=e.sent,n.network.forEach(function(e){a.selectList.push({network:e,name:t.name})}),e.next=9;break;case 7:e.prev=7,e.t0=e["catch"](0);case 9:return e.prev=9,this.count++,this.count===this.len&&(this.isFetchInstanceList=!1),e.finish(9);case 13:case"end":return e.stop()}},e,this,[[0,7,9,13]])}));function t(t){return e.apply(this,arguments)}return t}(),fetchIntanceList:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(){var t,n,a=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.isFetchInstanceList=!0,e.prev=1,e.next=4,Object(w["i"])();case 4:t=e.sent,n=t.data.filter(function(e){return!e.ipAddress}),this.len=n.length,this.count=0,0!==this.len&&n.forEach(function(e){a.fetchNetwork(e)}),e.next=13;break;case 11:e.prev=11,e.t0=e["catch"](1);case 13:return e.prev=13,e.finish(13);case 15:case"end":return e.stop()}},e,this,[[1,11,13,15]])}));function t(){return e.apply(this,arguments)}return t}()}},_=x,k=Object(f["a"])(_,g,y,!1,null,null,null),C=k.exports,I=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("a-modal",{attrs:{visible:e.visible,confirmLoading:e.confirmLoading,title:"释放IP地址",okText:"释放",okType:"danger"},on:{cancel:e.handleCancel,ok:e.handleCreate}},[n("p",[e._v("您已选择了 "+e._s(e.list.map(function(e){return e.ipAddress}).join(", "))+"，请确认你的操作，释放后该IP地址被回收到公网IP池，需要时重新申请。")])])],1)},L=[],S=(n("6762"),n("2fdb"),{mixins:[u["a"],u["b"]],data:function(){return{fetchAPI:d["c"],loop:!0,name:"free-ip"}},methods:{onShow:function(){var e=this.$parent,t=e.data,n=e.selectedRowKeys;this.list=t.filter(function(e){return n.includes(e.id)}),this.handleItemCount=this.list.length},handleItemFetch:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,n={id:t.id},e.next=4,this.fetchAPI(n);case 4:e.sent,e.next=9;break;case 7:e.prev=7,e.t0=e["catch"](0);case 9:return e.prev=9,this.handleItemCount=this.handleItemCount-1,0===this.handleItemCount&&this.handleLoopFetchEnd(),e.finish(9);case 13:case"end":return e.stop()}},e,this,[[0,7,9,13]])}));function t(t){return e.apply(this,arguments)}return t}()}}),V=S,R=(n("2eeb"),Object(f["a"])(V,I,L,!1,null,"509c2880",null)),j=R.exports,O=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("a-modal",{attrs:{visible:e.visible,confirmLoading:e.confirmLoading,title:"解绑IP地址",okText:"解绑",okType:"danger"},on:{cancel:e.handleCancel,ok:e.handleCreate}},[n("p",[e._v("您已选择了 "+e._s(e.list.map(function(e){return e.ipAddress}).join(", "))+"，请确认你的操作，解绑后该云主机将无法通过互联网访问。")])])],1)},A=[],P={mixins:[u["a"]],data:function(){return{fetchAPI:d["e"],loop:!0,name:"unbind-ip"}},methods:{onShow:function(){var e=this.$parent,t=e.data,n=e.selectedRowKeys;this.list=t.filter(function(e){return n.includes(e.id)}),this.handleItemCount=this.list.length},handleItemFetch:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,n={id:t.id},e.next=4,this.fetchAPI(n);case 4:e.sent,e.next=9;break;case 7:e.prev=7,e.t0=e["catch"](0);case 9:return e.prev=9,this.handleItemCount=this.handleItemCount-1,0===this.handleItemCount&&this.handleLoopFetchEnd(),e.finish(9);case 13:case"end":return e.stop()}},e,this,[[0,7,9,13]])}));function t(t){return e.apply(this,arguments)}return t}()}},T=P,$=(n("12fb"),Object(f["a"])(T,O,A,!1,null,"6cb70b66",null)),E=$.exports,N=n("3614"),M=n("261e"),q={ip:{status:{active:"已绑定",down:"未绑定"}}},K=q.ip.status,D={mixins:[N["a"]],components:{CreateModal:b,BindIp:C,FreeIp:j,UnbindIp:E},data:function(){return{getList:d["d"],module:"network",id:"ip",name:"路由",searchValues:{type:"ipAddress",inputValue:""},types:{ipAddress:"IP"},networkList:[],fetchNetworkListLoading:!1}},mounted:function(){this.fetchNetworkList()},methods:{fetchNetworkList:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.fetchNetworkListLoading=!0,e.prev=1,e.next=4,Object(M["d"])();case 4:t=e.sent,this.networkList=t.data.filter(function(e){return e.isRouterExternal}),e.next=10;break;case 8:e.prev=8,e.t0=e["catch"](1);case 10:return e.prev=10,this.fetchNetworkListLoading=!1,e.finish(10);case 13:case"end":return e.stop()}},e,this,[[1,8,10,13]])}));function t(){return e.apply(this,arguments)}return t}(),__handleTransformToZh:function(e){return K[e.toLowerCase()]||e},handleParseData:function(e){return e.map(function(e){return Object.assign({},e,{isBind:"无"===e.mappedStaticIp?"未绑定":"已绑定"})})}}},F=D,B=Object(f["a"])(F,i,s,!1,null,null,null),Z=B.exports,J=n("d8c3"),U={components:{MyContent:Z,PageLayout:J["a"]}},z=U,G=Object(f["a"])(z,a,r,!1,null,null,null);t["default"]=G.exports},"22cc":function(e,t,n){},"2eeb":function(e,t,n){"use strict";var a=n("8a28"),r=n.n(a);r.a},"393a":function(e,t,n){},"444c":function(e,t,n){},"4c6c":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[4===e.$route.matched.length?n("router-view"):n("page-layout",[n("div",{attrs:{slot:"header"},slot:"header"},[n("p",[e._v("路由器是租户专用设备，可高速连通租户下的私有网络, 子网与互联网的联通也是需要路由器连接的。")])]),n("div",{staticClass:"content"},[n("my-content")],1)])],1)},r=[],i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"table-operator",staticStyle:{"margin-bottom":"16px"}},[n("a-row",[n("a-col",[n("a-row",{attrs:{type:"flex",justify:"space-between"}},[n("span",[n("a-button",{staticStyle:{"margin-right":"10px"},attrs:{icon:"sync",disabled:e.loading,title:"刷新"},on:{click:e.handleRefresh}}),n("a-button",{staticStyle:{"margin-right":"10px"},attrs:{type:"primary",icon:"plus"},on:{click:function(t){e.handleSingleMenuClick("create")}}},[e._v("\n              创建\n            ")]),n("a-button",{staticStyle:{"margin-right":"10px"},attrs:{type:"danger",icon:"delete"},on:{click:function(t){e.handleMultiMenuClick("delete")}}},[e._v("\n              删除\n            ")])],1),n("span",{staticStyle:{display:"inline-flex"}},[n("a-input-group",{staticClass:"compact-search-input",attrs:{compact:""}},[n("a-select",{staticStyle:{width:"90px!important"},on:{change:function(t){return e.searchValues.type=t}},model:{value:e.searchValues.type,callback:function(t){e.$set(e.searchValues,"type",t)},expression:"searchValues.type"}},e._l(e.types,function(t,a){return n("a-select-option",{key:a,attrs:{value:a}},[e._v("\n                  "+e._s(t)+"\n                ")])}),1),n("a-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入"+e.types[e.searchValues.type]+"信息"},on:{pressEnter:e.handleDATA},model:{value:e.searchValues.inputValue,callback:function(t){e.$set(e.searchValues,"inputValue",t)},expression:"searchValues.inputValue"}},[e.searchValues.inputValue?n("a-icon",{attrs:{slot:"suffix",type:"close-circle"},on:{click:function(t){e.searchValues.inputValue=""}},slot:"suffix"}):e._e()],1)],1),n("a-button",{staticStyle:{"margin-left":"8px"},attrs:{type:"primary"},on:{click:e.handleDATA}},[e._v("\n              搜索\n              "),n("a-icon",{attrs:{type:"search"}})],1)],1)])],1)],1)],1),n("a-alert",{staticStyle:{"margin-bottom":"16px"},attrs:{type:"info",showIcon:""}},[n("div",{attrs:{slot:"message"},slot:"message"},[e._v("\n      已选择 \n      "),n("a",{staticStyle:{"font-weight":"600"}},[e._v(e._s(e.selectedRowKeys.length))]),e._v("  项\n      "),n("a",{staticStyle:{"margin-left":"24px"},on:{click:e.handleClearSelected}},[e._v("清空")])])]),n("a-table",{attrs:{rowSelection:{selectedRowKeys:e.selectedRowKeys,onChange:e.onTableSelectChange},columns:e.columns,rowKey:function(e){return e.id},dataSource:e.data,pagination:e.pagination,loading:e.loading},on:{change:e.handleTableChange},scopedSlots:e._u([{key:"internal",fn:function(t){return[e._l(t,function(a){return n("p",{directives:[{name:"show",rawName:"v-show",value:Array.isArray(t),expression:"Array.isArray(internal)"}],key:a.id},[e._v("\n        "+e._s(a.name+" : ")+e._s(a.cidr)+"\n      ")])}),n("p",{directives:[{name:"show",rawName:"v-show",value:!Array.isArray(t),expression:"!Array.isArray(internal)"}]},[e._v(e._s(t))])]}},{key:"operation",fn:function(t,a){return[n("a-dropdown",[n("a-menu",{attrs:{slot:"overlay"},on:{click:function(t){e.handleSingleMenuClick(t.key,a)}},slot:"overlay"},e._l(a.singleMenuOptions,function(t){return n("a-menu-item",{key:t.id},[e._v("\n            "+e._s(t.name)+"\n          ")])}),1),n("a-button",[e._v("\n          操作\n          "),n("a-icon",{attrs:{type:"down"}})],1)],1)]}}])}),n("create-modal"),n("edit-modal"),n("clear-modal"),n("delete-modal"),n("delete-router"),n("gateway"),n("attach"),n("detach")],1)},s=[],o=(n("ac6a"),n("96cf"),n("1da1")),l=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("a-modal",{attrs:{visible:e.visible,confirmLoading:e.confirmLoading,title:"新建路由器",okText:"确定"},on:{cancel:e.handleCancel,ok:e.handleCreate}},[n("a-form",{attrs:{form:e.form}},[n("a-form-item",{attrs:{labelCol:e.formItemLayout.labelCol,wrapperCol:e.formItemLayout.wrapperCol,label:"路由器名称"}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["routerName",{rules:[{required:!0,message:"请填写路由器名称!"}]}],expression:"[\n            'routerName',\n            {rules: [{ required: true, message: '请填写路由器名称!' }]}\n          ]"}],attrs:{placeholder:"路由器名称"}})],1),n("a-form-item",{attrs:{label:"外部网络",labelCol:e.formItemLayout.labelCol,wrapperCol:e.formItemLayout.wrapperCol}},[n("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["external",{rules:[{required:!0,message:"请选择外部网络!"}]}],expression:"[\n            'external',\n            {rules: [{ required: true, message: '请选择外部网络!' }]}\n          ]"}],attrs:{placeholder:"请选择外部网络"}},e._l(e.$parent.networkList,function(t){return n("a-select-option",{key:t.id,attrs:{value:t.id}},[e._v("\n            "+e._s(t.name)+"\n          ")])}),1)],1)],1)],1)],1)},c=[],u=(n("f751"),n("e0ae")),d=n("b775"),h=function(e){return Object(d["b"])("/network/router/list",e)},p=function(e){return Object(d["c"])("/network/router/create",e)},m=function(e){return Object(d["a"])("/network/router/delete",e)},f=function(e){return Object(d["c"])("/network/router/edit",e)},v=function(e){return Object(d["c"])("/network/router/gateway",e)},b=function(e){return Object(d["c"])("/network/router/attach",e)},g=function(e){return Object(d["c"])("/network/router/detach",e)},y={mixins:[u["a"],u["b"]],data:function(){return{fetchAPI:p,name:"create",type:"0"}},methods:{handleCreate:function(){var e=this;this.form.validateFieldsAndScroll(function(t,n){t||(e.formValues=Object.assign({},e.formValues,n),e.handleFetch())})}}},w=y,x=n("2877"),_=Object(x["a"])(w,l,c,!1,null,null,null),k=_.exports,C=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("a-modal",{attrs:{visible:e.visible,confirmLoading:e.confirmLoading,title:"编辑路由器",okText:"提交"},on:{cancel:e.handleCancel,ok:e.handleCreate}},[n("a-form",{attrs:{form:e.form}},[n("a-form-item",{attrs:{labelCol:{span:8},wrapperCol:{span:14},label:"名称"}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name",{initialValue:e.currRecord.name,rules:[{required:!0,message:"请输入名称"}]}],expression:"[\n            'name',\n            {\n              initialValue: currRecord.name,\n              rules: [{ required: true, message: '请输入名称' }]\n            }\n          ]"}],attrs:{placeholder:"请输入名称"}})],1),n("a-form-item",{attrs:{labelCol:{span:8},wrapperCol:{span:14},label:"管理状态"}},[n("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["bootable",{initialValue:e.currRecord.status&&e.currRecord.status.toUpperCase(),rules:[{required:!0,message:"请输入名称"}]}],expression:"[\n            'bootable',\n            {\n              initialValue: currRecord.status && currRecord.status.toUpperCase(),\n              rules: [{ required: true, message: '请输入名称' }]\n            }\n          ]"}]},[n("a-select-option",{attrs:{value:"UP"}},[e._v("启用")]),n("a-select-option",{attrs:{value:"DOWN"}},[e._v("关停")])],1)],1)],1)],1)],1)},I=[],L={mixins:[u["a"],u["b"]],data:function(){return{fetchAPI:f,name:"edit"}},methods:{onShow:function(){this.formValues=Object.assign({},this.formValues,{routerId:this.currRecord.id})}}},S=L,V=Object(x["a"])(S,C,I,!1,null,null,null),R=V.exports,j=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("a-modal",{attrs:{visible:e.visible,confirmLoading:e.confirmLoading,title:"清除网关",okText:"清除",okType:"danger"},on:{cancel:e.handleCancel,ok:e.handleCreate}},["无"===e.currRecord.extrannet?[n("template",{slot:"footer"},[n("a-button",{on:{click:e.handleCancel}},[e._v("取消")])],1),n("p",[e._v("该路由器目前没有关联任何网络接口,无需执行此操作.")])]:n("p",[e._v("\n      你已选择 "+e._s(e.currRecord.name)+" 。\n      清除网关后将无法联通公网. 请确认您的选择。你可以通过使用网关配置动作稍后重置网关，但网关IP可能改变。\n    ")])],2)],1)},O=[],A={mixins:[u["a"],u["b"]],data:function(){return{fetchAPI:v,name:"clearGateway",list:[]}},methods:{onShow:function(){this.formValues={routerId:this.currRecord.id,type:1}}}},P=A,T=(n("d880"),Object(x["a"])(P,j,O,!1,null,"46a5023e",null)),$=T.exports,E=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("a-modal",{attrs:{visible:e.visible,confirmLoading:e.confirmLoading,title:"删除路由器",okText:"删除",okType:"danger"},on:{cancel:e.handleCancel,ok:e.handleCreate}},[n("a-alert",{attrs:{message:"注意：删除路由器后数据不可恢复！",type:"warning",showIcon:""}}),n("p",[e._v("\n      你已经选择了路由器“"+e._s(e.totalList.map(function(e){return e.name}).join(", "))+"”，\n      "),e.internalList.length?[e._v("\n        其中“"+e._s(e.internalList.map(function(e){return e.name}).join(", "))+"”不满足删除条件,请先删除其关联的资源对象,再执行删除.\n      ")]:[e._v("\n        即将删除该路由,请确认你的操作.\n      ")]],2),e.internalList.length?n("template",{slot:"footer"},[n("a-button",{on:{click:e.handleCancel}},[e._v("取消")])],1):e._e()],2)],1)},N=[],M=(n("6762"),n("2fdb"),{mixins:[u["a"],u["b"]],data:function(){return{fetchAPI:m,name:"delete",loop:!0,internalList:[],totalList:[]}},methods:{onShow:function(){var e=this.$parent,t=e.data,n=e.selectedRowKeys;this.totalList=t.filter(function(e){return n.includes(e.id)}),this.internalList=this.totalList.filter(function(e){return Array.isArray(e.internal)&&e.internal.length}),this.list=this.totalList.filter(function(e){return!Array.isArray(e.internal)||!e.internal.length}),this.handleItemCount=this.list.length},handleItemFetch:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,n={routerId:t.id},e.next=4,this.fetchAPI(n);case 4:e.sent,e.next=9;break;case 7:e.prev=7,e.t0=e["catch"](0);case 9:return e.prev=9,this.handleItemCount=this.handleItemCount-1,0===this.handleItemCount&&this.handleLoopFetchEnd(),e.finish(9);case 13:case"end":return e.stop()}},e,this,[[0,7,9,13]])}));function t(t){return e.apply(this,arguments)}return t}()}}),q=M,K=(n("4f855"),Object(x["a"])(q,E,N,!1,null,"9b7c3212",null)),D=K.exports,F=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("a-modal",{attrs:{visible:e.visible,confirmLoading:e.confirmLoading,title:"删除路由器",okText:"删除",okType:"danger"},on:{cancel:e.handleCancel,ok:e.handleCreate}},[Array.isArray(e.currRecord.internal)&&e.currRecord.internal.length?[n("p",[e._v('该路由器下有关联的网络,请先执行"删除网络接口"操作,再执行删除路由器的操作')]),n("template",{slot:"footer"},[n("a-button",{on:{click:e.handleCancel}},[e._v("取消")])],1)]:[n("a-alert",{attrs:{message:"注意：删除路由器后数据不可恢复！",type:"warning",showIcon:""}}),n("p",[e._v('你已经选择了路由"'+e._s(e.currRecord.name)+'",即将删除该路由,请确认你的操作.')])]],2)],1)},B=[],Z={mixins:[u["a"],u["b"]],data:function(){return{fetchAPI:m,name:"deleteRouter"}},methods:{onShow:function(){this.formValues={routerId:this.currRecord.id}}}},J=Z,U=(n("880f"),Object(x["a"])(J,F,B,!1,null,"4590a70a",null)),z=U.exports,G=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("a-modal",{attrs:{visible:e.visible,confirmLoading:e.confirmLoading,title:"设置网关",okText:"确定"},on:{cancel:e.handleCancel,ok:e.handleCreate}},[n("a-form",{attrs:{form:e.form}},[n("a-form-item",{attrs:{labelCol:{span:8},wrapperCol:{span:14},label:"外部网络"}},[n("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["externalId",{initialValue:e.externalId,rules:[{required:!0,message:"请选择外部网络"}]}],expression:"[\n            'externalId',\n            {\n              initialValue: externalId,\n              rules: [{ required: true, message: '请选择外部网络' }]\n            }\n          ]"}],attrs:{placeholder:"请选择外部网络"}},e._l(e.$parent.networkList,function(t){return n("a-select-option",{key:t.id,attrs:{value:t.id}},[e._v("\n            "+e._s(t.name)+"\n          ")])}),1)],1),n("a-form-item",{attrs:{labelCol:{span:8},wrapperCol:{span:14},label:"路由名称"}},[n("a-input",{attrs:{value:e.currRecord.name,disabled:"",placeholder:"请输入名称"}})],1)],1)],1)],1)},W=[],Y=(n("7f7f"),n("7514"),{mixins:[u["a"],u["b"]],data:function(){return{fetchAPI:v,name:"gateway",externalId:""}},methods:{onShow:function(){var e=this;this.formValues={routerId:this.currRecord.id,type:0};var t=this.$parent.networkList.find(function(t){return t.name===e.currRecord.extrannet});this.externalId=t&&t.id}}}),H=Y,Q=Object(x["a"])(H,G,W,!1,null,null,null),X=Q.exports,ee=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("a-modal",{attrs:{visible:e.visible,confirmLoading:e.confirmLoading,title:"关联网络接口",okText:"确定"},on:{cancel:e.handleCancel,ok:e.handleCreate}},[n("a-form",{attrs:{form:e.form}},[n("a-form-item",{attrs:{labelCol:{span:8},wrapperCol:{span:14},label:"选择子网"}},[n("a-spin",{attrs:{spinning:e.fetchSubnetLoading}},[n("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["subnetId",{initialValue:e.subnetInitValue,rules:[{required:!0,message:"请选择子网"}]}],expression:"[\n              'subnetId',\n              {\n                initialValue: subnetInitValue,\n                rules: [{ required: true, message: '请选择子网' }]\n              }\n            ]"}],attrs:{placeholder:"请选择子网"}},e._l(e.subnetList,function(t){return n("a-select-option",{key:t.id,attrs:{value:t.id}},[e._v("\n              "+e._s(t.name)+"\n            ")])}),1)],1)],1),n("a-form-item",{attrs:{labelCol:{span:8},wrapperCol:{span:14},label:"路由名称"}},[n("a-input",{attrs:{value:e.currRecord.name,disabled:"",placeholder:"请输入名称"}})],1)],1)],1)],1)},te=[],ne=n("261e"),ae={mixins:[u["a"],u["b"]],data:function(){return{fetchAPI:b,name:"attach",subnetList:[],fetchSubnetLoading:!1,subnetInitValue:""}},methods:{onShow:function(){this.formValues={routerId:this.currRecord.id},this.fetchSubNetList()},fetchSubNetList:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.fetchSubnetLoading=!0,this.subnetInitValue="",e.prev=2,t=this.currRecord.internal,e.next=6,Object(ne["e"])();case 6:n=e.sent,this.fetchSubnetLoading=!1,this.subnetList=n.data.filter(function(e){return!e.isBindRouter}).concat(t),this.subnetInitValue=Array.isArray(t)&&t.length&&t[0].id,e.next=14;break;case 12:e.prev=12,e.t0=e["catch"](2);case 14:case"end":return e.stop()}},e,this,[[2,12]])}));function t(){return e.apply(this,arguments)}return t}(),handleCreate:function(){var e=this;this.form.validateFieldsAndScroll(function(t,n){if(!t){var a=e.currRecord.internal;Array.isArray(a)&&a.find(function(e){return e.id===n["subnetId"]})?(e.handleCancel(),e.$message.info("该网络接口已关联！")):(e.formValues=Object.assign({},e.formValues,n),e.handleFetch())}})}}},re=ae,ie=Object(x["a"])(re,ee,te,!1,null,null,null),se=ie.exports,oe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("a-modal",{attrs:{visible:e.visible,confirmLoading:e.confirmLoading,title:"删除网络接口",okText:"删除",okType:"danger"},on:{cancel:e.handleCancel,ok:e.handleCreate}},["无"===e.currRecord.internal?[n("p",[e._v("该路由尚未关联网络接口")])]:[n("a-alert",{attrs:{message:"说明:删除网络接口就是把用户私有网络的网关地址从路由器接口上删除.",type:"warning",showIcon:""}}),n("a-table",{attrs:{columns:e.columns,dataSource:e.currRecord.internal,pagination:e.pagination,rowKey:function(e){return e.id},rowSelection:{hideDefaultSelections:!0,type:"radio",selectedRowKeys:e.selectedRowKeys,onChange:e.onSelect}}})]],2)],1)},le=[],ce={mixins:[u["a"],u["b"]],data:function(){return{fetchAPI:g,name:"detach",pagination:!1,columns:[{title:"接口名称",dataIndex:"name"},{title:"接口地址",dataIndex:"cidr"}],selectedRowKeys:[]}},methods:{onShow:function(){this.selectedRowKeys=[],this.formValues={routerId:this.currRecord.id}},onSelect:function(e){this.selectedRowKeys=e,this.formValues=Object.assign({},this.formValues,{subnetId:e[0]})}}},ue=ce,de=(n("5b5d"),Object(x["a"])(ue,oe,le,!1,null,"8b375ba0",null)),he=de.exports,pe=n("3614"),me={router:{status:{active:"启用",up:"启用",down:"关停"}}},fe=me.router.status,ve={mixins:[pe["a"]],components:{CreateModal:k,EditModal:R,ClearModal:$,DeleteModal:D,DeleteRouter:z,Gateway:X,Attach:se,Detach:he},data:function(){return{getList:h,module:"network",id:"router",name:"路由",confirmLoading:!1,networkList:[],searchValues:{type:"name",inputValue:""},types:{name:"名称",shortID:"ID"}}},mounted:function(){this.fetchNetworkList()},methods:{fetchNetworkList:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(ne["d"])();case 3:t=e.sent,this.networkList=t.data.filter(function(e){return e.isRouterExternal}),e.next=9;break;case 7:e.prev=7,e.t0=e["catch"](0);case 9:case"end":return e.stop()}},e,this,[[0,7]])}));function t(){return e.apply(this,arguments)}return t}(),__handleTransformToZh:function(e){return fe[e]||e},handleParseData:function(e){var t=this;return e.forEach(function(e){e.status_zh=t.__handleTransformToZh(e.status);var n=JSON.parse(JSON.stringify(t.singleMenuOptions));e.singleMenuOptions=n}),e},handleSingleMenuClick:function(e,t){this.currRecord=t,this.handleShowModal(e)}}},be=ve,ge=Object(x["a"])(be,i,s,!1,null,null,null),ye=ge.exports,we=n("d8c3"),xe={components:{MyContent:ye,PageLayout:we["a"]}},_e=xe,ke=Object(x["a"])(_e,a,r,!1,null,null,null);t["default"]=ke.exports},"4f855":function(e,t,n){"use strict";var a=n("1d8f"),r=n.n(a);r.a},"5b5d":function(e,t,n){"use strict";var a=n("22cc"),r=n.n(a);r.a},"678c":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[4===e.$route.matched.length?n("router-view"):n("page-layout",[n("div",{attrs:{slot:"header"},slot:"header"},[n("p",[e._v("子网即租户的私有网络（Vxnet）用于云主机之间互联，它类似物理世界中使用交换机（L2Switch）组成的局域网。不同用户的私有网络之间是100%隔离的。私有网络可以作为子网加入到 路由器的端口上进而与互联网打通。")])]),n("div",{staticClass:"content"},[n("my-content")],1)])],1)},r=[],i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"table-operator",staticStyle:{"margin-bottom":"16px"}},[n("a-row",[n("a-col",[n("a-row",{attrs:{type:"flex",justify:"space-between"}},[n("span",[n("a-button",{staticStyle:{"margin-right":"10px"},attrs:{icon:"sync",disabled:e.loading,title:"刷新"},on:{click:e.handleRefresh}}),n("a-button",{staticStyle:{"margin-right":"10px"},attrs:{type:"primary",icon:"plus"},on:{click:function(t){e.handleSingleMenuClick("create")}}},[e._v("\n              创建网络\n            ")]),n("a-button",{staticStyle:{"margin-right":"10px"},attrs:{type:"danger",icon:"delete"},on:{click:function(t){e.handleMultiMenuClick("delete")}}},[e._v("\n              删除\n            ")])],1),n("span",{staticStyle:{display:"inline-flex"}},[n("a-input-group",{staticClass:"compact-search-input",attrs:{compact:""}},[n("a-select",{staticStyle:{width:"90px!important"},on:{change:function(t){return e.searchValues.type=t}},model:{value:e.searchValues.type,callback:function(t){e.$set(e.searchValues,"type",t)},expression:"searchValues.type"}},e._l(e.types,function(t,a){return n("a-select-option",{key:a,attrs:{value:a}},[e._v("\n                  "+e._s(t)+"\n                ")])}),1),n("a-input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入"+e.types[e.searchValues.type]+"信息"},on:{pressEnter:e.handleDATA},model:{value:e.searchValues.inputValue,callback:function(t){e.$set(e.searchValues,"inputValue",t)},expression:"searchValues.inputValue"}},[e.searchValues.inputValue?n("a-icon",{attrs:{slot:"suffix",type:"close-circle"},on:{click:function(t){e.searchValues.inputValue=""}},slot:"suffix"}):e._e()],1)],1),n("a-button",{staticStyle:{"margin-left":"8px"},attrs:{type:"primary"},on:{click:e.handleDATA}},[e._v("\n              搜索\n              "),n("a-icon",{attrs:{type:"search"}})],1)],1)])],1)],1)],1),n("a-alert",{staticStyle:{"margin-bottom":"16px"},attrs:{type:"info",showIcon:""}},[n("div",{attrs:{slot:"message"},slot:"message"},[e._v("\n      已选择 \n      "),n("a",{staticStyle:{"font-weight":"600"}},[e._v(e._s(e.selectedRowKeys.length))]),e._v("  项\n      "),n("a",{staticStyle:{"margin-left":"24px"},on:{click:e.handleClearSelected}},[e._v("清空")])])]),n("a-table",{attrs:{rowSelection:{selectedRowKeys:e.selectedRowKeys,onChange:e.onTableSelectChange},columns:e.columns,rowKey:function(e){return e.id},dataSource:e.data,pagination:e.pagination,loading:e.loading},on:{change:e.handleTableChange},scopedSlots:e._u([{key:"operation",fn:function(t,a){return[!0!==a.isRouterExternal?n("a-button",{staticStyle:{"margin-right":"10px"},attrs:{type:"primary",icon:"edit"},on:{click:function(t){e.handleSingleMenuClick("edit",a)}}},[e._v("\n        编辑\n      ")]):e._e()]}}])}),n("create-modal"),n("edit-modal"),n("delete-modal")],1)},s=[],o=(n("f751"),n("7b00")),l=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("a-modal",{attrs:{visible:e.visible,confirmLoading:e.confirmLoading,title:"编辑网络",okText:"提交"},on:{cancel:e.handleCancel,ok:e.handleCreate}},[n("a-form",{attrs:{form:e.form}},[n("a-form-item",{attrs:{labelCol:{span:8},wrapperCol:{span:14},label:"名称"}},[n("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name",{initialValue:e.currRecord.name,rules:[{required:!0,message:"请输入名称"}]}],expression:"[\n            'name',\n            {\n              initialValue: currRecord.name,\n              rules: [{ required: true, message: '请输入名称' }]\n            }\n          ]"}],attrs:{placeholder:"请输入名称"}})],1),n("a-form-item",{attrs:{labelCol:{span:8},wrapperCol:{span:14},label:"管理状态"}},[n("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["bootable",{initialValue:"up"==(e.currRecord.adminState||"").toLowerCase()?1:0,rules:[{required:!0,message:"请输入名称"}]}],expression:"[\n            'bootable',\n            {\n              initialValue: (currRecord.adminState || '').toLowerCase() == 'up' ? 1 : 0,\n              rules: [{ required: true, message: '请输入名称' }]\n            }\n          ]"}]},[n("a-select-option",{attrs:{value:1}},[e._v("启用")]),n("a-select-option",{attrs:{value:0}},[e._v("关停")])],1)],1)],1)],1)],1)},c=[],u=n("e0ae"),d=n("261e"),h={mixins:[u["a"],u["b"]],data:function(){return{fetchAPI:d["c"],name:"edit"}},methods:{onShow:function(){this.formValues={networkId:this.currRecord.id}}}},p=h,m=n("2877"),f=Object(m["a"])(p,l,c,!1,null,null,null),v=f.exports,b=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("a-modal",{attrs:{visible:e.visible,confirmLoading:e.confirmLoading,title:"删除网络",okText:"删除",okType:"danger"},on:{cancel:e.handleCancel,ok:e.handleCreate}},[n("a-alert",{attrs:{message:"注意：删除网络后数据不可恢复！",type:"warning",showIcon:""}}),n("p",{staticStyle:{"margin-top":"10px"}},[e._v("\n      你已经选择了网络“"+e._s(e.totalList.map(function(e){return e.name}).join(", "))+"”，\n      "),e.bindInstanList.length?[e._v("\n        其中“"+e._s(e.bindInstanList.map(function(e){return e.name}).join(", "))+"”不满足删除条件,请先删除其关联的资源对象,再执行删除.\n      ")]:[e._v("\n        即将删除该网络,请确认你的操作.\n      ")]],2),e.bindInstanList.length?n("template",{slot:"footer"},[n("a-button",{on:{click:e.handleCancel}},[e._v("取消")])],1):e._e()],2)],1)},g=[],y=(n("96cf"),n("1da1")),w=(n("6762"),n("2fdb"),{mixins:[u["a"]],data:function(){return{fetchAPI:d["b"],name:"delete",loop:!0,totalList:[],bindInstanList:[]}},methods:{onShow:function(){var e=this.$parent,t=e.data,n=e.selectedRowKeys;this.totalList=t.filter(function(e){return n.includes(e.id)}),this.bindInstanList=this.totalList.filter(function(e){return e.isBindInstance}),this.list=this.totalList.filter(function(e){return!e.isBindInstance}),this.handleItemCount=this.list.length},handleItemFetch:function(){var e=Object(y["a"])(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,n={networkId:t.id},e.next=4,this.fetchAPI(n);case 4:e.sent,e.next=9;break;case 7:e.prev=7,e.t0=e["catch"](0);case 9:return e.prev=9,this.handleItemCount=this.handleItemCount-1,0===this.handleItemCount&&this.handleLoopFetchEnd(),e.finish(9);case 13:case"end":return e.stop()}},e,this,[[0,7,9,13]])}));function t(t){return e.apply(this,arguments)}return t}()}}),x=w,_=Object(m["a"])(x,b,g,!1,null,null,null),k=_.exports,C=n("3614"),I=n("4aa6"),L=I["a"].subnet.status,S={mixins:[C["a"]],components:{CreateModal:o["a"],EditModal:v,DeleteModal:k},data:function(){return{getList:d["d"],module:"network",id:"subnet",name:"路由",searchValues:{type:"name",inputValue:""},types:{name:"名称",shortID:"ID"}}},computed:{},methods:{__handleTransformToZh:function(e){return L[e.toLowerCase()]||e},handleParseData:function(e){var t=this,n=e.map(function(e){return Object.assign({},e,{adminState_zh:t.__handleTransformToZh(e.adminState)})}),a=n.filter(function(e){return!0!==e.isRouterExternal}),r=n.filter(function(e){return!0===e.isRouterExternal});return a.concat(r)}}},V=S,R=Object(m["a"])(V,i,s,!1,null,null,null),j=R.exports,O=n("d8c3"),A={components:{MyContent:j,PageLayout:O["a"]}},P=A,T=Object(m["a"])(P,a,r,!1,null,null,null);t["default"]=T.exports},"67ab":function(e,t,n){},"880f":function(e,t,n){"use strict";var a=n("a38f"),r=n.n(a);r.a},"8a28":function(e,t,n){},a38f:function(e,t,n){},a4dc:function(e,t,n){"use strict";var a=n("444c"),r=n.n(a);r.a},d880:function(e,t,n){"use strict";var a=n("393a"),r=n.n(a);r.a}}]);
//# sourceMappingURL=network.2a402ad8.js.map