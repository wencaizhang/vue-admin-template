(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["user"],{"030a":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("page-layout",[a("div",{staticClass:"account-settings-info-view"},[a("a-row",{attrs:{gutter:16}},[a("a-col",{attrs:{md:16,lg:12}},[a("a-spin",{attrs:{spinning:e.spinning}},[a("a-form",{attrs:{form:e.form}},[a("a-form-item",e._b({attrs:{label:"账户类型"}},"a-form-item",e.formItemLayout,!1),[e._v("\n              "+e._s("1"===e.userInfo.userType?"个人":"企业")+"\n            ")]),a("a-form-item",e._b({attrs:{label:"账号名称"}},"a-form-item",e.formItemLayout,!1),[e._v("\n              "+e._s(e.userInfo.userName)+"\n            ")]),a("a-form-item",e._b({attrs:{label:"真实姓名"}},"a-form-item",e.formItemLayout,!1),[e._v("\n              "+e._s(e.userInfo.realName||"无")+"\n            ")]),a("a-form-item",e._b({attrs:{label:"联系地址"}},"a-form-item",e.formItemLayout,!1),[a("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["address",{initialValue:e.userInfo.address,rules:[{required:!0,message:"请输入联系地址"}]}],expression:"[\n                  'address',\n                  {\n                    initialValue: userInfo.address,\n                    rules:[\n                      { required: true, message: '请输入联系地址' }\n                    ]\n                  }\n                ]"}],attrs:{placeholder:"请输入联系地址",autosize:{minRows:2,maxRows:6}},on:{change:function(t){e.onChange(t,"address")}}})],1),a("a-form-item",e._b({attrs:{label:"联系电话"}},"a-form-item",e.formItemLayout,!1),[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["contactNumber",{initialValue:e.userInfo.contactNumber,rules:[{required:!0,message:"请输入联系电话"}]}],expression:"[\n                  'contactNumber',\n                  {\n                    initialValue: userInfo.contactNumber,\n                    rules:[\n                      { required: true, message: '请输入联系电话' }\n                    ]\n                  }\n                ]"}],attrs:{placeholder:"请输入联系电话"},on:{change:function(t){e.onChange(t,"contactNumber")}}})],1),a("a-form-item",e._b({},"a-form-item",e.formItemLayout,!1),[a("a-row",[a("a-col",{attrs:{offset:8,span:8}},[a("a-button",{attrs:{block:"",loading:e.loading,disabled:!e.submitAble,type:"primary"},on:{click:e.onSubmit}},[e._v("\n                    保存\n                  ")])],1)],1)],1)],1)],1)],1)],1)],1)])},r=[],i=(a("f751"),a("96cf"),a("1da1")),s=a("d8c3"),o=a("2d8e"),l={components:{PageLayout:s["a"]},created:function(){this.form=this.$form.createForm(this)},data:function(){return{userInfo:{},submitAble:!1,spinning:!1,form:null,loading:!1,formItemLayout:{labelCol:{span:4},wrapperCol:{span:12}}}},mounted:function(){this.fetch()},methods:{fetch:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.spinning=!0,e.prev=1,e.next=4,this.$store.dispatch("app/fetchUserInfo");case 4:t=e.sent,this.$store.commit("app/setUserInfo",t),this.userInfo=t,e.next=11;break;case 9:e.prev=9,e.t0=e["catch"](1);case 11:return e.prev=11,this.spinning=!1,e.finish(11);case 14:case"end":return e.stop()}},e,this,[[1,9,11,14]])}));function t(){return e.apply(this,arguments)}return t}(),onChange:function(e,t){this.submitAble=e.target.value!==this.userInfo[t]},onSubmit:function(){var e=this;this.form.validateFieldsAndScroll(function(t,a){t||(e.loading=!0,Object(o["l"])(a).then(function(t){Object.assign(e.userInfo,a),e.loading=!1,e.submitAble=!1,e.$message.success("保存成功")}).catch(function(t){e.loading=!1}))})}}},c=l,u=(a("2a6b"),a("2877")),d=Object(u["a"])(c,n,r,!1,null,"17015403",null);t["default"]=d.exports},1597:function(e,t,a){"use strict";var n=a("6e7c"),r=a.n(n);r.a},"200b":function(e,t,a){"use strict";var n=a("b691"),r=a.n(n);r.a},"20d6":function(e,t,a){"use strict";var n=a("5ca1"),r=a("0a49")(6),i="findIndex",s=!0;i in[]&&Array(1)[i](function(){s=!1}),n(n.P+n.F*s,"Array",{findIndex:function(e){return r(this,e,arguments.length>1?arguments[1]:void 0)}}),a("9c6c")(i)},"2a6b":function(e,t,a){"use strict";var n=a("cfa5"),r=a.n(n);r.a},3614:function(e,t,a){"use strict";a("7f7f"),a("456d"),a("96cf");var n=a("1da1"),r=(a("ac6a"),a("8615"),a("6b54"),a("7514"),a("6762"),a("2fdb"),a("f751"),a("ca00"));t["a"]={data:function(){return{name:"选项",pagination:{},initPagination:{total:0,current:1,pageSize:10,showSizeChanger:!0,pageSizeOptions:["10","20","30","40","50"]},payload:{},url:"/api/demo",allData:[],tempData:[],data:[],loading:!1,selectedRowKeys:[],currRecord:{},searchValues:{}}},computed:{message:function(){var e=this.selectedRowKeys.length;return"已选择 ".concat(e," 项")},columns:function(){return this.$store.state[this.module][this.id].columns},menuOptions:function(){return this.$store.state[this.module][this.id].menuOptions},multiMenuOptions:function(){return this.menuOptions.filter(function(e){return"multi"===e.type})},singleMenuOptions:function(){return this.menuOptions.filter(function(e){return"single"===e.type})}},mounted:function(){this.handleRefresh()},methods:{handleRefresh:function(){this.searchValues&&(this.searchValues=Object.assign({},this.searchValues,{inputValue:""})),this.pagination=Object.assign({},this.pagination,this.initPagination),this.fetch()},handleFilterByStatus:function(){var e=this.searchValues.status;e&&this.tempData.length>0&&(this.tempData="all"===e?this.tempData:this.tempData.filter(function(t){return t.status===e}))},handleFilterByInput:function(){var e=this.searchValues,t=e.type,a=e.inputValue;if(0!==this.tempData.length&&""!==a){var n=a.toLowerCase(),r=this.tempData.filter(function(e){var a=e[t];return"string"===typeof a?a.toLowerCase().includes(n):Array.isArray(a)?a.find(function(e){return e.toLowerCase().includes(n)}):"[object Object]"===a.toString()?Object.values(a).find(function(e){return e.toLowerCase().includes(n)}):void 0});this.tempData=r}},getCurrPageData:function(){var e=this.pagination,t=(e.total,e.current),a=e.pageSize,n=(t-1)*a||0,r=t*a||10;this.tempData=this.tempData.slice(n,r)},handleDATA:function(){var e=this;this.handleClearSelected(),this.tempData=this.allData,this.handleFilterByStatus(),this.handleFilterByInput(),this.pagination=Object.assign({},this.pagination,{total:this.tempData.length}),this.getCurrPageData(),this.loading=!0,setTimeout(function(){e.data=e.tempData,e.loading=!1,e.handleFetchSuccess()},100)},fetch:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(){var t,a,n=arguments;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:{},this.loading=!0,this.handleClearSelected(),t=this.payload||{},e.prev=4,e.next=7,this.getList(t);case 7:a=e.sent,a.data.forEach(function(e){if(e.id&&(e.shortID=e.id.substring(0,8)),e.createDate){var t=e.createDate;e.timestamp=Object(r["d"])(t)}e.status&&(e.status=e.status.toLowerCase()),Object.keys(e).forEach(function(t){var a=e[t],n="无";[null,void 0,""].includes(a)&&(e[t]=n),a&&Array.isArray(a)&&0===a.length&&(e[t]=[])})}),this.allData=this.handleParseData?this.handleParseData(a.data):a.data,this.handleDATA(),e.next=16;break;case 13:e.prev=13,e.t0=e["catch"](4),404===e.t0.response.status&&(this.data=[]);case 16:return e.prev=16,this.loading=!1,e.finish(16);case 19:case"end":return e.stop()}},e,this,[[4,13,16,19]])}));function t(){return e.apply(this,arguments)}return t}(),handleFetchSuccess:function(){},handleTableChange:function(e,t,a){this.pagination=Object.assign({},this.pagination,e),this.handleDATA()},onTableSelectChange:function(e){this.selectedRowKeys=e},handleClearSelected:function(){this.selectedRowKeys=[]},handleMultiMenuClick:function(e){0!==this.selectedRowKeys.length?this.handleShowModal(e):this.$message.info("请先选择您要操作的".concat(this.name||"数据"))},handleSingleMenuClick:function(e,t){this.currRecord=t,this.handleShowModal(e)},handleShowModal:function(e){this.$store.commit("".concat(this.id,"/toggleModalVisible"),e)},getSearchData:function(){}}}},4513:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("page-layout",{staticClass:"auth-container"},[a("a-spin",{attrs:{size:"large",spinning:e.spinning}},[e.spinning?e._e():a("a-tabs",{attrs:{defaultActiveKey:e.authType},on:{change:e.handleTabChange}},[1==e.authType?a("a-tab-pane",{key:"1",attrs:{tab:"个人认证"}},[a("Auth1",{attrs:{authInfo:e.authInfo},on:{upgrade:e.onUpgrade,"update:authInfo":function(t){e.authInfo=t},refresh:e.fetchAuthInfo}})],1):a("a-tab-pane",{key:"2",attrs:{tab:"企业认证"}},[a("Auth2",{attrs:{authInfo:e.authInfo},on:{"update:authInfo":function(t){e.authInfo=t},refresh:e.fetchAuthInfo}})],1)],1)],1)],1)},r=[],i=(a("f751"),a("96cf"),a("1da1")),s=(a("6762"),a("2fdb"),a("7514"),a("cadf"),a("551c"),a("097d"),a("d8c3")),o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"account-settings-info-view"},[a("a-row",{attrs:{gutter:16}},[a("a-col",{attrs:{md:20,lg:16}},[a("a-form",{attrs:{form:e.form}},[a("a-alert",{staticStyle:{margin:"0 0 24px",width:"66.7%"},attrs:{type:e.authTypeItem.type,showIcon:""}},[e.upgradeAble?a("div",{attrs:{slot:"message"},slot:"message"},[e._v("\n            "+e._s(e.authTypeItem.label)+"，\n            "),a("a",{on:{click:e.showModal}},[e._v("升级为企业认证")])]):a("div",{attrs:{slot:"message"},slot:"message"},[e._v("\n            "+e._s(e.authTypeItem.label)+"\n          ")]),e.authInfo&&e.authInfo.authResultContent?a("div",{attrs:{slot:"description"},slot:"description"},[e._v(e._s(e.authInfo&&e.authInfo.authResultContent))]):e._e()]),a("a-form-item",e._b({attrs:{label:"真实姓名"}},"a-form-item",e.formItemLayout,!1),[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["realName",{rules:[{required:!0,message:"请输入真实姓名"},{max:20,message:"最多允许20个字符"},e.ruleObj.HanziAndLetter]}],expression:"[\n              'realName',\n              {\n                rules:[\n                  { required: true, message: '请输入真实姓名' },\n                  { max: 20, message: '最多允许20个字符' },\n                  ruleObj.HanziAndLetter,\n                ]\n              }\n            ]"}],attrs:{disabled:e.disabled,placeholder:"请输入真实姓名"}})],1),a("a-form-item",e._b({attrs:{label:"身份证号"}},"a-form-item",e.formItemLayout,!1),[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["idCardNum",{rules:[{required:!0,message:"请输入身份证号"},{len:18,message:"请输入 18 位身份证号码"}]}],expression:"[\n              'idCardNum',\n              {\n                rules: [\n                  { required: true, message: '请输入身份证号' },\n                  { len: 18, message: '请输入 18 位身份证号码' },\n                ]\n              }\n            ]"}],attrs:{disabled:e.disabled,placeholder:"请输入身份证号"}})],1),a("a-form-item",e._b({attrs:{label:"身份证人像面"}},"a-form-item",e.formItemLayout,!1),[e.disabled?e._l(e.idCardFront,function(e){return a("a-image",{key:e.src,attrs:{src:e.url}})}):a("a-upload",e._b({directives:[{name:"decorator",rawName:"v-decorator",value:["idCardFront",{getValueFromEvent:e.normFile,rules:[{required:!0,message:"请上传身份证人像面"}]}],expression:"[\n              'idCardFront',\n              {\n                getValueFromEvent: normFile,\n                rules: [\n                  { required: true, message: '请上传身份证人像面' }\n                ]\n              }\n            ]"}],attrs:{defaultFileList:e.idCardFront},on:{preview:e.handlePreview,change:function(t){e.handleChange("idCardFront",t)}}},"a-upload",e.props,!1),[e.idCardFront.length<1?a("div",[a("a-icon",{attrs:{type:"plus"}}),a("div",{staticClass:"ant-upload-text"},[e._v("点击上传")])],1):e._e()]),a("a-modal",{attrs:{visible:e.previewVisible,footer:null},on:{cancel:e.handleCancel}},[a("img",{staticStyle:{width:"100%"},attrs:{alt:"example",src:e.previewImage}})])],2),a("a-form-item",e._b({attrs:{label:"身份证国徽面"}},"a-form-item",e.formItemLayout,!1),[e.disabled?e._l(e.idCardBack,function(e){return a("a-image",{key:e.src,attrs:{src:e.url}})}):a("a-upload",e._b({directives:[{name:"decorator",rawName:"v-decorator",value:["idCardBack",{getValueFromEvent:e.normFile,rules:[{required:!0,message:"请上传身份证国徽面"}]}],expression:"[\n              'idCardBack',\n              {\n                getValueFromEvent: normFile,\n                rules: [\n                  { required: true, message: '请上传身份证国徽面' }\n                ]\n              }\n            ]"}],attrs:{defaultFileList:e.idCardBack},on:{preview:e.handlePreview,change:function(t){e.handleChange("idCardBack",t)}}},"a-upload",e.props,!1),[e.idCardBack.length<1?a("div",[a("a-icon",{attrs:{type:"plus"}}),a("div",{staticClass:"ant-upload-text"},[e._v("点击上传")])],1):e._e()]),a("a-modal",{attrs:{visible:e.previewVisible,footer:null},on:{cancel:e.handleCancel}},[a("img",{staticStyle:{width:"100%"},attrs:{alt:"example",src:e.previewImage}})])],2),e.disabled?e._e():a("a-form-item",[a("a-button",{staticClass:"submit-btn",attrs:{loading:e.loading,disabled:e.loading,type:"primary"},on:{click:e.onSubmit}},[e._v("\n            "+e._s(e.pass?"修改":"提交")+"\n          ")]),e.pass?a("span",{staticClass:"tip"},[e._v("(每年只能修改 3 次认证信息)")]):e._e()],1)],1)],1)],1),a("a-modal",{attrs:{title:"提示",visible:e.visible,confirmLoading:e.confirmLoading},on:{ok:e.handleOk,cancel:e.handleCancelUpgradeTips}},[a("p",[a("a-icon",{staticStyle:{color:"red"},attrs:{type:"info-circle"}}),e._v("\n      升级到企业用户后需要提交企业相关信息重新认证，而且企业用户不能再降级为个人用户。确定升级为企业用户吗？\n    ")],1)])],1)},l=[],c=a("0792"),u=(a("20d6"),a("9fb0")),d=a("56cd"),m=a("ca00"),h={props:{authInfo:Object},created:function(){this.form=this.$form.createForm(this)},mounted:function(){this.fetchSuccess()},data:function(){return{form:null,loading:!1,formItemLayout:{labelCol:{span:4},wrapperCol:{span:12}},previewVisible:!1,previewImage:"",idCardFront:[],idCardBack:[],acceptFileTypes:".png,.jpg,.bmp,.gif",uploadAction:"/cmp/v1/upload/batch/Certificates",authStatusMap:[{val:1,editAble:!0,type:"info",label:"未认证"},{val:2,editAble:!0,type:"success",label:"个人认证完成"},{val:3,editAble:!0,type:"success",label:"企业认证完成"},{val:4,editAble:!1,type:"warning",label:"个人认证中"},{val:5,editAble:!0,type:"error",label:"个人认证未通过"},{val:6,editAble:!1,type:"warning",label:"企业认证中"},{val:7,editAble:!0,type:"error",label:"企业认证未通过"},{val:8,editAble:!1,type:"warning",label:"个人认证修改中"},{val:9,editAble:!1,type:"warning",label:"企业认证修改中"},{val:10,editAble:!0,type:"error",label:"企业认证修改失败"},{val:11,editAble:!0,type:"error",label:"个人认证修改失败"},{val:12,editAble:!0,type:"info",label:"企业未认证"}]}},computed:{disabled:function(){return!this.authTypeItem.editAble},authStatus:function(){return this.authInfo.authStatus},status4P:function(){return this.authStatusMap.filter(function(e){return e.label.includes("个人")})},status4C:function(){return this.authStatusMap.filter(function(e){return e.label.includes("企业")})},props:function(){var e=this.$ls.get(u["b"])[u["a"]];return{name:"file",listType:"picture-card",headers:{"X-Token":e},accept:this.acceptFileTypes,action:this.uploadAction}}},methods:{fetchSuccess:function(e){},_validate:function(){var e=this;return new Promise(function(t,a){e.form.validateFieldsAndScroll(function(e,n){e?a():t(n)})})},handleCancel:function(){this.previewVisible=!1},handlePreview:function(e){this.previewImage=e.url||e.thumbUrl,this.previewVisible=!0},handleChange:function(e,t){var a=t.file,n=t.fileList;if(a.response&&[401,404].includes(a.response.status)&&(d["a"].error({message:"请登录",description:""}),Object(m["a"])(),this.$router.push({name:"login"})),"error"===a.status){this.$message.error("上传失败，请重试");var r=n.findIndex(function(e){return e.uid===a.uid});n.splice(r,1)}this[e]=n},normFile:function(e){return Array.isArray(e)?e:"done"===e.file.status?e.file.response.filePath[0].url:void e.file.status}}},p=a("2d8e"),f=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"img-wrapper"},[e.loading||e.error?e._e():a("div",{staticClass:"mask"},[a("a-icon",{staticClass:"action",attrs:{type:"eye"},on:{click:e.handlePreview}})],1),e.loading?e._t("placeholder",[a("a-spin")]):e.error?e._t("error",[a("div",{staticClass:"error-wrapper"},[a("a-icon",{staticClass:"icon",attrs:{type:"picture"}}),a("p",[e._v("加载失败")])],1)]):a("img",{attrs:{src:e.src,alt:""}})],2),a("a-modal",{attrs:{visible:e.previewVisible,footer:null},on:{cancel:e.handleCancel}},[a("img",{staticStyle:{width:"100%"},attrs:{alt:"example",src:e.previewImage}})])],1)},g=[],v={props:{src:{type:String,required:!0},alt:String},data:function(){return{previewVisible:!1,previewImage:"",loading:!1,error:!1}},mounted:function(){this.loadImage()},methods:{loadImage:function(){var e=this;this.loading=!0,this.error=!1;var t=new Image;t.onload=function(a){return e.handleLoad(a,t)},t.onerror=this.handleError.bind(this),t.src=this.src},handleLoad:function(e,t){this.imageWidth=t.width,this.imageHeight=t.height,this.loading=!1},handleError:function(e){this.loading=!1,this.error=!0,this.$emit("error",e),console.log(e)},handleCancel:function(){this.previewVisible=!1},handlePreview:function(e){this.previewImage=this.src,this.previewVisible=!0}}},b=v,y=(a("68a7"),a("2877")),C=Object(y["a"])(b,f,g,!1,null,"c81bb110",null),w=C.exports,I={mixins:[h],components:{AImage:w},data:function(){return{ruleObj:c["a"],formItemLayout:{labelCol:{span:4},wrapperCol:{span:12}},visible:!1,confirmLoading:!1}},computed:{authTypeItem:function(){var e=this;return this.status4P.find(function(t){return t.val==e.authStatus})||this.authStatusMap[0]},upgradeAble:function(){return 2==this.authInfo.authStatus},pass:function(){return 2==this.authStatus||11==this.authStatus}},methods:{fetchSuccess:function(){var e=this,t=this.authInfo,a={realName:t.realName,idCardNum:t.idCardNum,idCardFront:t.idCardFront,idCardBack:t.idCardBack};this.form.setFieldsValue(a);var n=["idCardFront","idCardBack"];n.forEach(function(a){t[a]&&e[a].push({uid:"-1",name:a,status:"done",url:t[a]})})},onSubmit:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(t){var a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,e.prev=1,e.next=4,this._validate();case 4:return a=e.sent,e.next=7,Object(p["a"])(Object.assign(a,{authType:1}));case 7:e.sent,this.$message.success("提交成功，请等待审核结果"),this.$emit("refresh"),e.next=14;break;case 12:e.prev=12,e.t0=e["catch"](1);case 14:return e.prev=14,this.loading=!1,e.finish(14);case 17:case"end":return e.stop()}},e,this,[[1,12,14,17]])}));function t(t){return e.apply(this,arguments)}return t}(),showModal:function(){this.visible=!0},handleOk:function(e){var t=this;this.confirmLoading=!0,Object(p["b"])().then(function(e){t.visible=!1,t.confirmLoading=!1,t.$message.success(e.desc),t.$emit("upgrade")})},handleCancelUpgradeTips:function(e){this.visible=!1}}},_=I,x=(a("1597"),Object(y["a"])(_,o,l,!1,null,"d2ecb334",null)),k=x.exports,F=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"account-settings-info-view"},[a("a-row",{attrs:{gutter:16}},[a("a-col",{attrs:{md:20,lg:16}},[a("a-form",{attrs:{form:e.form}},[a("a-alert",{staticStyle:{margin:"0 0 24px",width:"75%"},attrs:{message:e.authTypeItem.label,description:e.authInfo&&e.authInfo.authResultContent,type:e.authTypeItem.type,showIcon:""}}),a("a-form-item",e._b({attrs:{label:"企业名称"}},"a-form-item",e.formItemLayout,!1),[a("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["enterpriseName",{rules:[{required:!0,message:"请输入企业名称"},{max:100,message:"最多允许100个字符"},e.ruleObj.HanziAndLetter]}],expression:"[\n              'enterpriseName',\n              {\n                rules:[\n                  { required: true, message: '请输入企业名称' },\n                  { max: 100, message: '最多允许100个字符' },\n                  ruleObj.HanziAndLetter,\n                ]\n              }\n            ]"}],attrs:{disabled:e.disabled,placeholder:"请输入企业名称",autosize:{minRows:2,maxRows:6}}})],1),a("a-form-item",e._b({attrs:{label:"统一社会信用代码"}},"a-form-item",e.formItemLayout,!1),[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["creditCode",{rules:[{required:!0,message:"请输入 18 位信用代码"},{len:18,message:"请输入 18 位信用代码"},e.ruleObj.enterpriseName]}],expression:"[\n              'creditCode',\n              {\n                rules:[\n                  { required: true, message: '请输入 18 位信用代码' },\n                  { len: 18, message: '请输入 18 位信用代码' },\n                  ruleObj.enterpriseName,\n                ]\n              }\n            ]"}],attrs:{disabled:e.disabled,placeholder:"请输入信用代码"}})],1),a("a-form-item",e._b({attrs:{label:"注册地址"}},"a-form-item",e.formItemLayout,!1),[a("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["registerAddress",{rules:[{required:!0,message:"请输入注册地址"},{max:100,message:"最多允许100个字符"}]}],expression:"[\n              'registerAddress',\n              {\n                rules: [\n                  { required: true, message: '请输入注册地址' },\n                  { max: 100, message: '最多允许100个字符' },\n                ]\n              }\n            ]"}],attrs:{disabled:e.disabled,placeholder:"请输入注册地址",autosize:{minRows:2,maxRows:6}}})],1),a("a-form-item",e._b({attrs:{label:"营业执照"}},"a-form-item",e.formItemLayout,!1),[e.disabled?e._l(e.businessLicense,function(e){return a("a-image",{key:e.src,attrs:{src:e.url}})}):a("a-upload",e._b({directives:[{name:"decorator",rawName:"v-decorator",value:["businessLicense",{getValueFromEvent:e.normFile,rules:[{required:!0,message:"请上传营业执照"}]}],expression:"[\n              'businessLicense',\n              {\n                getValueFromEvent: normFile,\n                rules: [\n                  { required: true, message: '请上传营业执照' }\n                ]\n              }\n            ]"}],attrs:{defaultFileList:e.businessLicense},on:{preview:e.handlePreview,change:function(t){e.handleChange("businessLicense",t)}}},"a-upload",e.props,!1),[e.businessLicense.length<1?a("div",[a("a-icon",{attrs:{type:"plus"}}),a("div",{staticClass:"ant-upload-text"},[e._v("点击上传")])],1):e._e()]),a("a-modal",{attrs:{visible:e.previewVisible,footer:null},on:{cancel:e.handleCancel}},[a("img",{staticStyle:{width:"100%"},attrs:{alt:"example",src:e.previewImage}})])],2),a("a-form-item",e._b({attrs:{label:"企业法人"}},"a-form-item",e.formItemLayout,!1),[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["legalPersonName",{rules:[{required:!0,message:"请输入企业法人名称"},{max:20,message:"最多允许20个字符"},e.ruleObj.HanziAndLetter]}],expression:"[\n              'legalPersonName',\n              {\n                rules:[\n                  { required: true, message: '请输入企业法人名称' },\n                  { max: 20, message: '最多允许20个字符' },\n                  ruleObj.HanziAndLetter,\n                ]\n              }\n            ]"}],attrs:{disabled:e.disabled,placeholder:"请输入企业法人名称"}})],1),a("a-form-item",e._b({attrs:{label:"法人身份证号"}},"a-form-item",e.formItemLayout,!1),[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["legalPersonIDCardNum",{rules:[{required:!0,message:"请输入法人身份证号码"},{len:18,message:"请输入 18 位身份证号码"}]}],expression:"[\n              'legalPersonIDCardNum',\n              {\n                rules: [\n                  { required: true, message: '请输入法人身份证号码' },\n                  { len: 18, message: '请输入 18 位身份证号码' },\n                ]\n              }\n            ]"}],attrs:{disabled:e.disabled,placeholder:"请输入法人身份证号"}})],1),a("a-form-item",e._b({attrs:{label:"法人身份证人像面"}},"a-form-item",e.formItemLayout,!1),[e.disabled?e._l(e.legalPersonIDCardFront,function(e){return a("a-image",{key:e.src,attrs:{src:e.url}})}):a("a-upload",e._b({directives:[{name:"decorator",rawName:"v-decorator",value:["legalPersonIDCardFront",{getValueFromEvent:e.normFile,rules:[{required:!0,message:"请上传法人身份证人像面"}]}],expression:"[\n              'legalPersonIDCardFront',\n              {\n                getValueFromEvent: normFile,\n                rules: [\n                  { required: true, message: '请上传法人身份证人像面' }\n                ]\n              }\n            ]"}],attrs:{defaultFileList:e.legalPersonIDCardFront},on:{preview:e.handlePreview,change:function(t){e.handleChange("legalPersonIDCardFront",t)}}},"a-upload",e.props,!1),[e.legalPersonIDCardFront.length<1?a("div",[a("a-icon",{attrs:{type:"plus"}}),a("div",{staticClass:"ant-upload-text"},[e._v("点击上传")])],1):e._e()]),a("a-modal",{attrs:{visible:e.previewVisible,footer:null},on:{cancel:e.handleCancel}},[a("img",{staticStyle:{width:"100%"},attrs:{alt:"example",src:e.previewImage}})])],2),a("a-form-item",e._b({attrs:{label:"法人身份证国徽面"}},"a-form-item",e.formItemLayout,!1),[e.disabled?e._l(e.legalPersonIDCardBack,function(e){return a("a-image",{key:e.src,attrs:{src:e.url}})}):a("a-upload",e._b({directives:[{name:"decorator",rawName:"v-decorator",value:["legalPersonIDCardBack",{getValueFromEvent:e.normFile,rules:[{required:!0,message:"请输入上传法人身份证国徽面"}]}],expression:"[\n              'legalPersonIDCardBack',\n              {\n                getValueFromEvent: normFile,\n                rules: [\n                  { required: true, message: '请输入上传法人身份证国徽面' }\n                ]\n              }\n            ]"}],attrs:{defaultFileList:e.legalPersonIDCardBack},on:{preview:e.handlePreview,change:function(t){e.handleChange("legalPersonIDCardBack",t)}}},"a-upload",e.props,!1),[e.legalPersonIDCardBack.length<1?a("div",[a("a-icon",{attrs:{type:"plus"}}),a("div",{staticClass:"ant-upload-text"},[e._v("点击上传")])],1):e._e()]),a("a-modal",{attrs:{visible:e.previewVisible,footer:null},on:{cancel:e.handleCancel}},[a("img",{staticStyle:{width:"100%"},attrs:{alt:"example",src:e.previewImage}})])],2),a("a-row",[a("a-col",{attrs:{span:18}},[a("p",{staticStyle:{color:"#5184f6","font-weight":"500","margin-bottom":"10px","margin-left":"5px"}},[e._v("认证联系人信息")]),a("div",{staticStyle:{"border-top":"1px solid #d9d9d9","margin-bottom":"24px"}})])],1),a("a-form-item",e._b({attrs:{label:"联系人姓名"}},"a-form-item",e.formItemLayout,!1),[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["realName",{rules:[{required:!0,message:"请输入联系人姓名"},{max:20,message:"最多允许20个字符"},e.ruleObj.HanziAndLetter]}],expression:"[\n              'realName',\n              {\n                rules:[\n                  { required: true, message: '请输入联系人姓名' },\n                  { max: 20, message: '最多允许20个字符' },\n                  ruleObj.HanziAndLetter,\n                ]\n              }\n            ]"}],attrs:{disabled:e.disabled,placeholder:"请输入联系人姓名"}})],1),a("a-form-item",e._b({attrs:{label:"联系人身份证号"}},"a-form-item",e.formItemLayout,!1),[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["idCardNum",{rules:[{required:!0,message:"请输入联系人身份证号"},{len:18,message:"请输入 18 位身份证号码"}]}],expression:"[\n              'idCardNum',\n              {\n                rules: [\n                  { required: true, message: '请输入联系人身份证号' },\n                  { len: 18, message: '请输入 18 位身份证号码' },\n                ]\n              }\n            ]"}],attrs:{disabled:e.disabled,placeholder:"请输入联系人身份证号"}})],1),a("a-form-item",e._b({attrs:{label:"联系人身份证人像面"}},"a-form-item",e.formItemLayout,!1),[e.disabled?e._l(e.idCardFront,function(e){return a("a-image",{key:e.src,attrs:{src:e.url}})}):a("a-upload",e._b({directives:[{name:"decorator",rawName:"v-decorator",value:["idCardFront",{getValueFromEvent:e.normFile,rules:[{required:!0,message:"请上传联系人身份证人像面"}]}],expression:"[\n              'idCardFront',\n              {\n                getValueFromEvent: normFile,\n                rules: [\n                  { required: true, message: '请上传联系人身份证人像面' }\n                ]\n              }\n            ]"}],attrs:{defaultFileList:e.idCardFront},on:{preview:e.handlePreview,change:function(t){e.handleChange("idCardFront",t)}}},"a-upload",e.props,!1),[e.idCardFront.length<1?a("div",[a("a-icon",{attrs:{type:"plus"}}),a("div",{staticClass:"ant-upload-text"},[e._v("点击上传")])],1):e._e()]),a("a-modal",{attrs:{visible:e.previewVisible,footer:null},on:{cancel:e.handleCancel}},[a("img",{staticStyle:{width:"100%"},attrs:{alt:"example",src:e.previewImage}})])],2),a("a-form-item",e._b({attrs:{label:"联系人身份证国徽面"}},"a-form-item",e.formItemLayout,!1),[e.disabled?e._l(e.idCardBack,function(e){return a("a-image",{key:e.src,attrs:{src:e.url}})}):a("a-upload",e._b({directives:[{name:"decorator",rawName:"v-decorator",value:["idCardBack",{getValueFromEvent:e.normFile,rules:[{required:!0,message:"请上传联系人身份证国徽面"}]}],expression:"[\n              'idCardBack',\n              {\n                getValueFromEvent: normFile,\n                rules: [\n                  { required: true, message: '请上传联系人身份证国徽面' }\n                ]\n              }\n            ]"}],attrs:{defaultFileList:e.idCardBack},on:{preview:e.handlePreview,change:function(t){e.handleChange("idCardBack",t)}}},"a-upload",e.props,!1),[e.idCardBack.length<1?a("div",[a("a-icon",{attrs:{type:"plus"}}),a("div",{staticClass:"ant-upload-text"},[e._v("点击上传")])],1):e._e()]),a("a-modal",{attrs:{visible:e.previewVisible,footer:null},on:{cancel:e.handleCancel}},[a("img",{staticStyle:{width:"100%"},attrs:{alt:"example",src:e.previewImage}})])],2),e.disabled?e._e():a("a-form-item",[a("a-button",{staticClass:"submit-btn",attrs:{loading:e.loading,disabled:e.loading,type:"primary"},on:{click:e.onSubmit}},[e._v("\n            "+e._s(e.pass?"修改":"提交")+"\n          ")]),e.pass?a("span",{staticClass:"tip"},[e._v("(每年只能修改 3 次认证信息)")]):e._e()],1)],1)],1)],1)],1)},O=[],S={mixins:[h],components:{AImage:w},data:function(){return{ruleObj:c["a"],formItemLayout:{labelCol:{span:6},wrapperCol:{span:12}},previewVisible:!1,previewImage:"",businessLicense:[],legalPersonIDCardFront:[],legalPersonIDCardBack:[],idCardFront:[],idCardBack:[]}},computed:{authTypeItem:function(){var e=this;return this.status4C.find(function(t){return t.val==e.authStatus})||this.authStatusMap[0]},pass:function(){return 3==this.authStatus}},methods:{fetchSuccess:function(){var e=this,t=this.authInfo,a={enterpriseName:t.enterpriseName,creditCode:t.creditCode,registerAddress:t.registerAddress,businessLicense:t.businessLicense,legalPersonName:t.legalPersonName,legalPersonIDCardNum:t.legalPersonIDCardNum,legalPersonIDCardFront:t.legalPersonIDCardFront,legalPersonIDCardBack:t.legalPersonIDCardBack,realName:t.realName,idCardNum:t.idCardNum,idCardFront:t.idCardFront,idCardBack:t.idCardBack};this.form.setFieldsValue(a);var n=["businessLicense","legalPersonIDCardFront","legalPersonIDCardBack","idCardFront","idCardBack"];n.forEach(function(a){t[a]&&e[a].push({uid:"-1",name:a,status:"done",url:t[a]})})},onSubmit:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(t){var a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this._validate();case 3:return a=e.sent,this.loading=!0,e.next=7,Object(p["a"])(Object.assign(a,{authType:2}));case 7:e.sent,this.$message.success("提交成功，请等待审核结果"),this.$emit("refresh"),e.next=14;break;case 12:e.prev=12,e.t0=e["catch"](0);case 14:return e.prev=14,this.loading=!1,e.finish(14);case 17:case"end":return e.stop()}},e,this,[[0,12,14,17]])}));function t(t){return e.apply(this,arguments)}return t}()}},L=S,A=(a("f746"),Object(y["a"])(L,F,O,!1,null,"4e04af9a",null)),j=A.exports,P={components:{PageLayout:s["a"],Auth1:k,Auth2:j},data:function(){return{formValues:{authType:"1"},authStatusMap:[{val:1,editAble:!0,type:"info",label:"未认证"},{val:2,editAble:!0,type:"success",label:"个人认证完成"},{val:3,editAble:!0,type:"success",label:"企业认证完成"},{val:4,editAble:!1,type:"warning",label:"个人认证中"},{val:5,editAble:!0,type:"error",label:"个人认证未通过"},{val:6,editAble:!1,type:"warning",label:"企业认证中"},{val:7,editAble:!0,type:"error",label:"企业认证未通过"},{val:8,editAble:!1,type:"warning",label:"个人认证修改中"},{val:9,editAble:!1,type:"warning",label:"企业认证修改中"},{val:10,editAble:!0,type:"error",label:"企业认证修改失败"},{val:11,editAble:!0,type:"error",label:"个人认证修改失败"},{val:12,editAble:!1,type:"info",label:"企业未认证"}],authInfo:{},loading:!1,spinning:!1,upgrade:!1}},created:function(){this.fetchAuthInfo()},computed:{authType:function(){var e=this,t=this.authStatusMap.find(function(t){return t.val==e.authInfo.authStatus});return t?t.label.includes("个人")?"1":t.label.includes("企业")?"2":"1":"1"}},methods:{fetchAuthInfo:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.spinning=!0,e.prev=1,e.next=4,Object(p["e"])();case 4:t=e.sent,this.authInfo=Object.assign({},this.authInfo,t),this.$store.commit("app/setAuthType",t.authStatus),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](1),404===e.t0.response.status&&(Object.assign(this.authInfo,{authStatus:"1"}),this.$store.commit("app/setAuthType","1"));case 12:return e.prev=12,this.spinning=!1,e.finish(12);case 15:case"end":return e.stop()}},e,this,[[1,9,12,15]])}));function t(){return e.apply(this,arguments)}return t}(),handleTabChange:function(e){console.log(e)},onUpgrade:function(){this.fetchAuthInfo()}}},D=P,V=(a("7e5c"),Object(y["a"])(D,n,r,!1,null,null,null));t["default"]=V.exports},"504c":function(e,t,a){var n=a("0d58"),r=a("6821"),i=a("52a7").f;e.exports=function(e){return function(t){var a,s=r(t),o=n(s),l=o.length,c=0,u=[];while(l>c)i.call(s,a=o[c++])&&u.push(e?[a,s[a]]:s[a]);return u}}},"599a":function(e,t,a){"use strict";var n=a("eb59"),r=a.n(n);r.a},6434:function(e,t,a){},"68a7":function(e,t,a){"use strict";var n=a("76e4"),r=a.n(n);r.a},"6e7c":function(e,t,a){},"76e4":function(e,t,a){},"7d97":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("page-layout",[a("a-spin",{attrs:{spinning:e.loading,size:"large"}}),e.loading?e._e():a("a-list",{attrs:{itemLayout:"horizontal",dataSource:e.listData},scopedSlots:e._u([{key:"renderItem",fn:function(t){return a("a-list-item",{},[a("a-list-item-meta",{attrs:{description:t.desc}},[a("a",{attrs:{slot:"title"},slot:"title"},[e._v(e._s(t.title))])]),a("a",{attrs:{slot:"actions"},on:{click:function(a){e.handleClick(t)}},slot:"actions"},[e._v(e._s(t.btnText))])],1)}}])})],1),a("bind-email"),a("edit-phone-or-email",{attrs:{currItem:e.currItem}}),a("edit-pwd")],1)},r=[],i=(a("96cf"),a("1da1")),s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("a-modal",{attrs:{visible:e.visible,confirmLoading:e.confirmLoading,title:e.userInfo.email?"修改邮箱":"绑定邮箱",okText:"提交"},on:{cancel:e.handleCancel,ok:e.handleCreate}},[a("a-form",{attrs:{form:e.form}},[a("a-form-item",{attrs:{labelCol:{span:8},wrapperCol:{span:14},label:e.userInfo.email?"邮箱地址":"绑定邮箱"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["emailAddress",{initialValue:e.currRecord.name,rules:[{required:!0,message:"新邮箱地址"}]}],expression:"[\n            'emailAddress',\n            {\n              initialValue: currRecord.name,\n              rules: [\n                { required: true, message: '新邮箱地址' },\n              ]\n            }\n          ]"}],attrs:{placeholder:"新邮箱地址"}})],1),a("a-form-item",{attrs:{labelCol:{span:8},wrapperCol:{span:14},label:"验证码"}},[a("div",{staticStyle:{display:"flex"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["emailCode",{initialValue:e.currRecord.name,rules:[{required:!0,message:"请输入 6 位数字验证码"},{len:6,message:"请输入 6 位数字验证码"},e.rulesObj.number]}],expression:"[\n              'emailCode',\n              {\n                initialValue: currRecord.name,\n                rules: [\n                  { required: true, message: '请输入 6 位数字验证码' },\n                  { len: 6, message: '请输入 6 位数字验证码' },\n                  rulesObj.number,\n                ]\n              }\n            ]"}],attrs:{placeholder:"请输入验证码"}}),a("captcha-button",{on:{clickBtn:e.onClickBtn}})],1)])],1)],1)],1)},o=[],l=(a("f751"),a("e0ae")),c=a("0792"),u=a("2d8e"),d=a("876a"),m={mixins:[l["a"],l["b"]],components:{CaptchaButton:d["a"]},data:function(){return{fetchAPI:u["g"],rulesObj:c["a"],name:"editEmail",formValues:{emailType:"NEW"}}},computed:{userInfo:function(){return this.$parent.userInfo}},methods:{onShow:function(){},handleValidateField:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(){var t,a=this,n=arguments;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:null,e.abrupt("return",new Promise(function(e,n){a.form.validateFieldsAndScroll(Array.isArray(t)?t:[t],function(t,a){return t?n(t):e(a)})}));case 2:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),handleCreate:function(){var e=this;this.form.validateFieldsAndScroll(function(t,a){t||(Object.assign(e.formValues,a,{emailType:"NEW"}),e.handleFetch())})},onClickBtn:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(t){var a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.handleValidateField("emailAddress");case 3:a=e.sent,t&&t({payload:{email:a.emailAddress,codeType:"1"},api:u["k"]}),e.next=9;break;case 7:e.prev=7,e.t0=e["catch"](0);case 9:case"end":return e.stop()}},e,this,[[0,7]])}));function t(t){return e.apply(this,arguments)}return t}()}},h=m,p=a("2877"),f=Object(p["a"])(h,s,o,!1,null,null,null),g=f.exports,v=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("a-modal",{attrs:{visible:e.visible,confirmLoading:e.confirmLoading,title:"修改"+e.dynamicsData.name,okText:"提交"},on:{cancel:e.handleCancel,ok:e.handleCreate}},[a("template",{slot:"footer"},[a("a-button",{on:{click:e.handleCancel}},[e._v("\n        取消\n      ")]),1==e.step?a("a-button",{attrs:{loading:e.confirmLoading},on:{click:function(t){e.handleNextStep("form1")}}},[e._v("\n        下一步\n      ")]):a("a-button",{attrs:{loading:e.confirmLoading},on:{click:function(t){e.handleNextStep("form2")}}},[e._v("\n        提交\n      ")])],1),e.renderForm?[1==e.step?a("a-form",{attrs:{form:e.form1}},[a("a-form-item",{attrs:{labelCol:{span:8},wrapperCol:{span:14},label:"已绑定"+e.dynamicsData.name}},[e._v("\n          "+e._s(e.userInfo[e.currItem.key])+"\n        ")]),a("a-form-item",{attrs:{labelCol:{span:8},wrapperCol:{span:14},label:"验证码"}},[a("div",{staticStyle:{display:"flex"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:[e.dynamicsData.formKeys.code,{initialValue:e.userInfo.name,rules:[{required:!0,message:"请输入 6 位数字验证码"},{len:6,message:"请输入 6 位数字验证码"},e.rulesObj.number]}],expression:"[\n                dynamicsData.formKeys.code,\n                {\n                  initialValue: userInfo.name,\n                  rules: [\n                    { required: true, message: '请输入 6 位数字验证码' },\n                    { len: 6, message: '请输入 6 位数字验证码' },\n                    rulesObj.number,\n                  ]\n                }\n              ]"}],attrs:{placeholder:"请输入验证码"}}),a("captcha-button",{key:"old",on:{clickBtn:e.onClickBtn}})],1)])],1):a("a-form",{attrs:{form:e.form2}},[a("a-form-item",{attrs:{labelCol:{span:8},wrapperCol:{span:14},label:"绑定新"+e.dynamicsData.name}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:[e.dynamicsData.formKeys.type,{initialValue:e.userInfo.name,rules:[{required:!0,message:"请输入新"+e.dynamicsData.name},e.rulesObj[e.currItem.key]]}],expression:"[\n              dynamicsData.formKeys.type,\n              {\n                initialValue: userInfo.name,\n                rules: [\n                  { required: true, message: `请输入新${dynamicsData.name}` },\n                  rulesObj[currItem.key],\n                ]\n              }\n            ]"}],attrs:{placeholder:"请输入新"+e.dynamicsData.name}})],1),a("a-form-item",{attrs:{labelCol:{span:8},wrapperCol:{span:14},label:"验证码"}},[a("div",{staticStyle:{display:"flex"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:[e.dynamicsData.formKeys.code,{initialValue:e.userInfo.name,rules:[{required:!0,message:"请输入 6 位数字验证码"},{len:6,message:"请输入 6 位数字验证码"},e.rulesObj.number]}],expression:"[\n                dynamicsData.formKeys.code,\n                {\n                  initialValue: userInfo.name,\n                  rules: [\n                    { required: true, message: '请输入 6 位数字验证码' },\n                    { len: 6, message: '请输入 6 位数字验证码' },\n                    rulesObj.number,\n                  ]\n                }\n              ]"}],attrs:{placeholder:"请输入验证码"}}),a("captcha-button",{key:"new",on:{clickBtn:e.onClickBtn}})],1)])],1)]:e._e()],2)],1)},b=[],y=a("ade3"),C={mixins:[l["a"],l["b"]],components:{CaptchaButton:d["a"]},props:{currItem:Object},data:function(){return{fetchAPI:null,rulesObj:c["a"],name:"editPhone",step:1,form1:null,form2:null,dynamicsData:{},renderForm:!1}},computed:{isPhone:function(){return"phone"===this.currItem.key},userInfo:function(){return this.$parent.userInfo},currForm:function(){return this["form"+this.step]}},methods:{onShow:function(){this.step=1,this.setDynamicsData(),this.renderForm=!0,this.form1=this.$form.createForm(this),this.form2=this.$form.createForm(this)},setDynamicsData:function(){var e=this.isPhone;this.fetchAPI=e?u["h"]:u["g"],this.dynamicsData={formKeys:{type:e?"phoneNumber":"emailAddress",code:e?"smsCode":"emailCode"},name:e?"手机":"邮箱",fetchCodeApi:e?u["j"]:u["k"],codeType:e?"smsType":"codeType"}},setFormValues:function(e){var t,a=this.isPhone,n=(t={},Object(y["a"])(t,a?"phoneNumberType":"emailType",1==this.step?"OLD":"NEW"),Object(y["a"])(t,a?"phoneNumber":"emailAddress",this.userInfo[this.currItem.key]),t);this.formValues=Object.assign({},this.formValues,n,e)},_validateForm:function(e){return new Promise(function(t,a){e.validateFields(function(e,n){e?a():t(n)})})},handleNextStep:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(t){var a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this._validateForm(this[t]);case 3:a=e.sent,this.setFormValues(a),this.handleFetch(),e.next=10;break;case 8:e.prev=8,e.t0=e["catch"](0);case 10:case"end":return e.stop()}},e,this,[[0,8]])}));function t(t){return e.apply(this,arguments)}return t}(),handleFetchSuccess:function(e){1!==this.step?(this.handleCancel(),this.openNotification(e),this.handleRefreshParentTable()):this.step++},onClickBtn:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(t){var a,n,r,i,s,o,l;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:a=this.dynamicsData.formKeys.type,n=this.isPhone?"phoneNumber":"email",i={smsType:1==this.step?4:3,codeType:"1"},1==this.step?(s={},Object(y["a"])(s,n,this.userInfo[this.currItem.key]),Object(y["a"])(s,this.dynamicsData.codeType,i[this.dynamicsData.codeType]),r=s):(l=this.currForm.getFieldValue(a),o={},Object(y["a"])(o,n,l),Object(y["a"])(o,this.dynamicsData.codeType,i[this.dynamicsData.codeType]),r=o),t&&t({payload:r,api:this.dynamicsData.fetchCodeApi});case 5:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}()}},w=C,I=Object(p["a"])(w,v,b,!1,null,null,null),_=I.exports,x=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("a-modal",{attrs:{visible:e.visible,confirmLoading:e.confirmLoading,title:"修改密码",okText:"提交"},on:{cancel:e.handleCancel,ok:e.handleCreate}},[a("a-form",{attrs:{form:e.form}},[a("a-form-item",{attrs:{labelCol:{span:8},wrapperCol:{span:14},label:"旧密码"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["oldPwd",{initialValue:e.currRecord.name,rules:[{required:!0,message:"旧密码"}]}],expression:"[\n            'oldPwd',\n            {\n              initialValue: currRecord.name,\n              rules: [\n                { required: true, message: '旧密码' },\n              ]\n            }\n          ]"}],attrs:{type:"password",placeholder:"设置旧密码"}})],1),a("a-form-item",{attrs:{labelCol:{span:8},wrapperCol:{span:14},label:"新密码"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["newPwd",{initialValue:e.currRecord.name,rules:[{required:!0,message:"请设置登录密码"},{min:6,message:"最少 6 个字符"},{max:32,message:"最多 32 个字符"},{validator:e.validatePwd}]}],expression:"[\n            'newPwd',\n            {\n              initialValue: currRecord.name,\n              rules: [\n                { required: true, message: '请设置登录密码' },\n                { min: 6, message: '最少 6 个字符' },\n                { max: 32, message: '最多 32 个字符' },\n                { validator: validatePwd },\n              ]\n            }\n          ]"}],attrs:{type:"password",placeholder:"设置新密码"}})],1),a("a-form-item",{attrs:{labelCol:{span:8},wrapperCol:{span:14},label:"再次确认新密码"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["password2",{initialValue:e.currRecord.name,rules:[{required:!0,message:"再次确认新密码"}]}],expression:"[\n            'password2',\n            {\n              initialValue: currRecord.name,\n              rules: [\n                { required: true, message: '再次确认新密码' },\n              ]\n            }\n          ]"}],attrs:{type:"password",placeholder:"再次确认新密码"}})],1)],1)],1)],1)},k=[],F={mixins:[l["a"],l["b"]],data:function(){return{fetchAPI:u["i"],rulesObj:c["a"],name:"editPwd"}},methods:{validatePwd:function(e,t,a){var n=[/[a-zA-Z]/,/[0-9]/,/[_\-!@#]/],r=n.filter(function(e){return e.test(t)});r.length<2?a("数字、大小写字母及特殊符号(! - _ # @)中至少包含2种组合"):a()},onShow:function(){this.formValues={hardDiskId:this.currRecord.id}},handleCreate:function(){var e=this,t=this;this.form.validateFieldsAndScroll(function(a,n){a||(n.password2===n.newPwd?(Object.assign(t.formValues,n),t.handleFetch()):e.form.setFields({password2:{value:n.password2,errors:[{message:"两次密码输入不一致!"}]}}))})}}},O=F,S=Object(p["a"])(O,x,k,!1,null,null,null),L=S.exports,A=a("d8c3"),j={components:{PageLayout:A["a"],BindEmail:g,EditPhoneOrEmail:_,EditPwd:L},data:function(){return{module:"user",id:"security",name:"安全设置",loading:!1,userInfo:{},listData:[],currItem:{}}},created:function(){this.fetch()},methods:{handleRefresh:function(){this.fetch()},fetch:function(){var e=Object(i["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,this.loading=!0,e.next=4,this.$store.dispatch("app/fetchUserInfo");case 4:t=e.sent,this.$store.commit("app/setUserInfo",t),this.userInfo=t,this.listData=[{id:"editPwd",key:"editPwd",title:"账户密码",desc:"",btnText:"修改"},{id:"editPhone",key:"phone",title:"密保手机",desc:"已绑定手机 : ".concat(t.phone),btnText:"修改"},{id:t.email?"editPhone":"editEmail",key:"email",title:"备用邮箱",desc:t.email?"已绑定邮箱 : ".concat(t.email):"尚未绑定邮箱",btnText:t.email?"修改":"绑定"}],this.loading=!1,e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](0),this.loading=!1;case 14:case"end":return e.stop()}},e,this,[[0,11]])}));function t(){return e.apply(this,arguments)}return t}(),handleShowModal:function(e){this.$store.commit("".concat(this.id,"/toggleModalVisible"),e)},handleClick:function(e){this.currItem=e,this.handleShowModal(e.id)}}},P=j,D=Object(p["a"])(P,n,r,!1,null,"cc00eb1e",null);t["default"]=D.exports},"7e5c":function(e,t,a){"use strict";var n=a("e7ba"),r=a.n(n);r.a},8615:function(e,t,a){var n=a("5ca1"),r=a("504c")(!1);n(n.S,"Object",{values:function(e){return r(e)}})},a371:function(e,t,a){},b691:function(e,t,a){},cfa5:function(e,t,a){},d8c3:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",[a("page-header",[e._t("header")],2),a("a-layout-content",{staticClass:"page-content"},[e._t("default")],2)],1)},r=[],i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"page-header"},[a("div",{staticClass:"page-header-detail"},[a("div",{staticClass:"title"},[a("h1",[e._v(e._s(e.title))])]),a("div",{staticClass:"desc"},[e._t("default")],2)])])},s=[],o={name:"",components:{},computed:{},created:function(){this.getTitle()},data:function(){return{title:""}},methods:{getTitle:function(){var e=this.$route.matched;this.title=e.length>2?e[2].meta.title:this.$route.meta.title}}},l=o,c=(a("200b"),a("2877")),u=Object(c["a"])(l,i,s,!1,null,null,null),d=u.exports,m={name:"",components:{PageHeader:d},computed:{},data:function(){return{}},methods:{}},h=m,p=(a("599a"),Object(c["a"])(h,n,r,!1,null,null,null));t["a"]=p.exports},dc0a:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("page-layout",[a("div",{staticClass:"content"},[a("div",{staticClass:"table-operator",staticStyle:{"margin-bottom":"16px"}},[a("a-row",{attrs:{type:"flex",justify:"space-between"}},[a("a-col",[a("a-row",{attrs:{type:"flex",justify:"space-between"}},[a("a-button",{staticStyle:{"margin-right":"10px"},attrs:{icon:"sync",disabled:e.loading,title:"刷新"},on:{click:e.handleRefresh}}),a("a-button",{staticStyle:{"margin-right":"10px"},attrs:{type:"primary",icon:"plus"},on:{click:function(t){e.handleSingleMenuClick("create")}}},[e._v("\n                创建工单\n              ")])],1)],1)],1)],1),a("a-alert",{staticStyle:{"margin-bottom":"16px"},attrs:{type:"info",showIcon:""}},[a("div",{attrs:{slot:"message"},slot:"message"},[e._v("\n          已选择 \n          "),a("a",{staticStyle:{"font-weight":"600"}},[e._v(e._s(e.selectedRowKeys.length))]),e._v("  项\n          "),a("a",{staticStyle:{"margin-left":"24px"},on:{click:e.handleClearSelected}},[e._v("清空")])])]),a("a-table",{attrs:{rowSelection:{selectedRowKeys:e.selectedRowKeys,onChange:e.onTableSelectChange},columns:e.columns,rowKey:function(e){return e.id},dataSource:e.data,pagination:e.pagination,loading:e.loading},on:{change:e.handleTableChange},scopedSlots:e._u([{key:"detail",fn:function(t,n){return[a("a",{attrs:{title:"点击查看工单详情"},on:{click:function(t){e.handleSingleMenuClick("detail",n)}}},[e._v(e._s(t.substring(0,8)))])]}},{key:"operation",fn:function(t,n){return[a("a-dropdown",{staticStyle:{"margin-right":"10px"}},[a("a-menu",{attrs:{slot:"overlay"},on:{click:function(t){e.handleSingleMenuClick(t.key,n)}},slot:"overlay"},e._l(e.singleMenuOptions,function(t){return a("a-menu-item",{key:t.id},[e._v("\n                "+e._s(t.name)+"\n              ")])}),1),a("a-button",{staticStyle:{"margin-left":"8px"}},[e._v("\n              操作\n              "),a("a-icon",{attrs:{type:"down"}})],1)],1)]}}])})],1)]),a("create"),a("detail")],1)},r=[],i=(a("f751"),a("ac6a"),a("d8c3")),s=a("3614"),o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("a-modal",{attrs:{visible:e.visible,confirmLoading:e.confirmLoading,title:"创建工单",okText:"创建"},on:{cancel:e.handleCancel,ok:e.handleCreate}},[a("a-form",{attrs:{form:e.form}},[a("a-form-item",{attrs:{label:"工单接收者",labelCol:e.formItemLayout.labelCol,wrapperCol:e.formItemLayout.wrapperCol}},[a("a-input",{attrs:{value:"UR Cloud",disabled:""}})],1),a("a-form-item",{attrs:{label:"工单标题",labelCol:e.formItemLayout.labelCol,wrapperCol:e.formItemLayout.wrapperCol}},[a("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["workOrderTitle",{rules:[{required:!0,message:"请输入工单标题!"}]}],expression:"[\n            'workOrderTitle',\n            {\n              rules: [\n                { required: true, message: '请输入工单标题!' },\n              ]\n            }\n          ]"}],attrs:{placeholder:"请填写工单标题"}})],1),a("a-form-item",{attrs:{label:"工单内容",labelCol:e.formItemLayout.labelCol,wrapperCol:e.formItemLayout.wrapperCol}},[a("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["workOrderContent",{rules:[{required:!0,message:"请输入工单标题!"},e.rulesObj.maxLen100]}],expression:"[\n            'workOrderContent',\n            {\n              rules: [\n                { required: true, message: '请输入工单标题!' },\n                rulesObj.maxLen100,\n              ]\n            }\n          ]"}],attrs:{placeholder:"请填写工单内容"}})],1),a("a-form-item",{attrs:{label:"相关资源ID",labelCol:e.formItemLayout.labelCol,wrapperCol:e.formItemLayout.wrapperCol,extra:"如果问题涉及到具体资源，请提供这些资源的 ID，形如 814a5d60，方便快速定位问题。"}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["withResourceId",{rules:[{required:!0,message:"请输入相关资源ID!"}]}],expression:"[\n            'withResourceId',\n            {\n              rules: [\n                { required: true, message: '请输入相关资源ID!' },\n              ]\n            }\n          ]"}]})],1)],1)],1)],1)},l=[],c=a("e0ae"),u=a("b775"),d=function(e){return Object(u["c"])("/workOrder/create",e)},m=function(e){return Object(u["b"])("/workOrder/list",e)},h=a("0792"),p={mixins:[c["a"],c["b"]],data:function(){return{rulesObj:h["a"],fetchAPI:d,name:"create"}},methods:{}},f=p,g=a("2877"),v=Object(g["a"])(f,o,l,!1,null,null,null),b=v.exports,y=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("a-modal",{attrs:{visible:e.visible,confirmLoading:e.confirmLoading,title:"工单详情"},on:{cancel:e.handleCancel,ok:e.handleCreate}},[a("template",{slot:"footer"},[a("a-button",{on:{click:e.handleCancel}},[e._v("\n        确定\n      ")])],1),a("ul",{staticClass:"item-descr-list"},[a("li",[a("span",{staticClass:"item-descr-tit"},[e._v("\n          工单编号:\n        ")]),a("span",{staticClass:"item-descr-txt"},[e._v("\n          "+e._s(e.currRecord.id||"无")+"            \n        ")])]),a("li",[a("span",{staticClass:"item-descr-tit"},[e._v("\n          工单标题:\n        ")]),a("span",{staticClass:"item-descr-txt"},[e._v("\n          "+e._s(e.currRecord.id||"无")+"            \n        ")])]),a("li",[a("span",{staticClass:"item-descr-tit"},[e._v("\n          工单内容:\n        ")]),a("span",{staticClass:"item-descr-txt"},[e._v("\n          "+e._s(e.currRecord.id||"无")+"            \n        ")])]),a("li",[a("span",{staticClass:"item-descr-tit"},[e._v("\n          资源ID:\n        ")]),a("span",{staticClass:"item-descr-txt"},[e._v("\n          "+e._s(e.currRecord.id||"无")+"            \n        ")])]),a("li",[a("span",{staticClass:"item-descr-tit"},[e._v("\n          工单处理记录:\n        ")]),a("span",{staticClass:"item-descr-txt"},[e._v("\n          "+e._s(e.currRecord.id||"无")+"            \n        ")])]),a("li",[a("span",{staticClass:"item-descr-tit"},[e._v("\n          工单提交人:\n        ")]),a("span",{staticClass:"item-descr-txt"},[e._v("\n          "+e._s(e.currRecord.id||"无")+"            \n        ")])]),a("li",[a("span",{staticClass:"item-descr-tit"},[e._v("\n          工单处理人:\n        ")]),a("span",{staticClass:"item-descr-txt"},[e._v("\n          "+e._s(e.currRecord.id||"无")+"            \n        ")])]),a("li",[a("span",{staticClass:"item-descr-tit"},[e._v("\n          工单提交时间:\n        ")]),a("span",{staticClass:"item-descr-txt"},[e._v("\n          "+e._s(e.currRecord.id||"无")+"            \n        ")])]),a("li",[a("span",{staticClass:"item-descr-tit"},[e._v("\n          工单关闭时间:\n        ")]),a("span",{staticClass:"item-descr-txt"},[e._v("\n          "+e._s(e.currRecord.id||"无")+"            \n        ")])])])],2)],1)},C=[],w={mixins:[c["a"]],data:function(){return{name:"detail"}},methods:{}},I=w,_=(a("f727"),Object(g["a"])(I,y,C,!1,null,"5e613724",null)),x=_.exports,k={mixins:[s["a"]],components:{PageLayout:i["a"],create:b,detail:x},data:function(){return{getList:m,module:"order",id:"order",name:"工单"}},methods:{handleParseData:function(e){return e.forEach(function(e){var t=["未处理","已解决","处理中"],a=t[e.workOrderStatus];Object.assign(e,{workOrderStatus_zh:a})}),e}}},F=k,O=Object(g["a"])(F,n,r,!1,null,"8acd0936",null);t["default"]=O.exports},e0ae:function(e,t,a){"use strict";a.d(t,"a",function(){return i}),a.d(t,"b",function(){return s});a("f751"),a("ac6a"),a("96cf");var n=a("1da1"),r=a("ade3"),i=(a("7f7f"),{data:function(){return{module:"",bodyStyle:{"max-height":"400px",overflow:"auto"},radioStyle:{display:"block",height:"30px",lineHeight:"30px"},confirmLoading:!1,formValues:{},currRecord:{},fetchAPI:function(){},isRefreshParentTable:!0,loop:!1,list:[],handleItemCount:0}},computed:{visible:function(){var e=this.$store.getters["".concat(this.$parent.id,"/getVisibleById")](this.name);return e}},watch:{visible:function(e,t){e?(this.currRecord=this.$parent.currRecord||{},this.formValues={},this.form&&this.form.resetFields(),this.bindId(),this.onShow()):(this.form&&this.form.resetFields(),this.onHidden())}},methods:{bindId:function(){},onShow:function(){},onHidden:function(){},onInputNumberChange:function(e,t){var a=Object(r["a"])({},t,parseInt(e));this.form.setFieldsValue(a)},handleCancel:function(){this.$store.commit("".concat(this.$parent.id,"/toggleModalVisible"),this.name)},handleCreate:function(){this.handleFetch()},handleFetch:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!this.loop){e.next=3;break}return this.handleLoopFetchStart(),e.abrupt("return",!1);case 3:return this.confirmLoading=!0,e.prev=4,e.next=7,this.fetchAPI(this.formValues);case 7:t=e.sent,this.handleFetchSuccess(t),e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](4),this.handleFetchFailed(e.t0);case 14:return e.prev=14,this.confirmLoading=!1,e.finish(14);case 17:case"end":return e.stop()}},e,this,[[4,11,14,17]])}));function t(){return e.apply(this,arguments)}return t}(),handleFetchSuccess:function(e){this.handleCancel(),this.openNotification(e),this.handleRefreshParentTable()},handleFetchFailed:function(e){},handleRefreshParentTable:function(){this.isRefreshParentTable&&this.$parent.handleRefresh()},openNotification:function(e){this.$message.success(e.desc||"操作成功")},formatter:function(e,t){return parseInt(t)+" "+e},parser:function(e){return parseInt(e)},handleLoopFetchStart:function(){var e=this;this.list.length&&this.handleItemCount&&(this.confirmLoading=!0,this.list.forEach(function(t){e.handleItemFetch(t)}))},handleLoopFetchEnd:function(){this.confirmLoading=!1,this.$message.success("操作完成"),this.handleRefreshParentTable(),this.handleCancel()},handleItemFetch:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.fetchAPI(t);case 3:e.sent,e.next=8;break;case 6:e.prev=6,e.t0=e["catch"](0);case 8:return e.prev=8,this.handleItemCount=this.handleItemCount-1,0===this.handleItemCount&&this.handleLoopFetchEnd(),e.finish(8);case 12:case"end":return e.stop()}},e,this,[[0,6,8,12]])}));function t(t){return e.apply(this,arguments)}return t}()}}),s={data:function(){return{formItemLayout:{labelCol:{span:8},wrapperCol:{span:14}},form:null}},created:function(){var e=this;this.form=this.$form.createForm(this,{onFieldsChange:function(t,a){e.onFieldsChange(t,a)},onValuesChange:function(t,a,n){e.onValuesChange(t,a,n)}})},methods:{onValuesChange:function(e,t,a){},onFieldsChange:function(){},handleCreate:function(){var e=this;this.form.validateFieldsAndScroll(function(t,a){t||(e.formValues=Object.assign({},e.formValues,a),e.handleFetch())})}}}},e7ba:function(e,t,a){},eb59:function(e,t,a){},f727:function(e,t,a){"use strict";var n=a("6434"),r=a.n(n);r.a},f746:function(e,t,a){"use strict";var n=a("a371"),r=a.n(n);r.a}}]);
//# sourceMappingURL=user.bcf92ba7.js.map