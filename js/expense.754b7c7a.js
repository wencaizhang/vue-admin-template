(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["expense"],{"0565":function(e,t,a){"use strict";var n=a("6b3e"),r=a.n(n);r.a},"14ff":function(e,t,a){"use strict";a.d(t,"f",function(){return r}),a.d(t,"b",function(){return i}),a.d(t,"e",function(){return o}),a.d(t,"c",function(){return s}),a.d(t,"g",function(){return l}),a.d(t,"a",function(){return c}),a.d(t,"d",function(){return u});var n=a("b775"),r=function(e){return Object(n["b"])("/securitygroup/list",e)},i=function(e){return Object(n["c"])("/securitygroup/create",e)},o=function(e){return Object(n["c"])("/securitygroup/edit",e)},s=function(e){return Object(n["a"])("/securitygroup/delete",e)},l=function(e){return Object(n["b"])("/securitygroup/rule/list",e)},c=function(e){return Object(n["c"])("/securitygroup/rule/add",e)},u=function(e){return Object(n["a"])("/securitygroup/rule/delete",e)}},"200b":function(e,t,a){"use strict";var n=a("b691"),r=a.n(n);r.a},3614:function(e,t,a){"use strict";a("7f7f"),a("456d"),a("96cf");var n=a("1da1"),r=(a("ac6a"),a("8615"),a("6b54"),a("7514"),a("6762"),a("2fdb"),a("f751"),a("ca00"));t["a"]={data:function(){return{name:"选项",pagination:{},initPagination:{total:0,current:1,pageSize:10,showSizeChanger:!0,pageSizeOptions:["10","20","30","40","50"]},payload:{},url:"/api/demo",allData:[],tempData:[],data:[],loading:!1,selectedRowKeys:[],currRecord:{},searchValues:{}}},computed:{message:function(){var e=this.selectedRowKeys.length;return"已选择 ".concat(e," 项")},columns:function(){return this.$store.state[this.module][this.id].columns},menuOptions:function(){return this.$store.state[this.module][this.id].menuOptions},multiMenuOptions:function(){return this.menuOptions.filter(function(e){return"multi"===e.type})},singleMenuOptions:function(){return this.menuOptions.filter(function(e){return"single"===e.type})}},mounted:function(){this.handleRefresh()},methods:{handleRefresh:function(){this.searchValues&&(this.searchValues=Object.assign({},this.searchValues,{inputValue:""})),this.pagination=Object.assign({},this.pagination,this.initPagination),this.fetch()},handleFilterByStatus:function(){var e=this.searchValues.status;e&&this.tempData.length>0&&(this.tempData="all"===e?this.tempData:this.tempData.filter(function(t){return t.status===e}))},handleFilterByInput:function(){var e=this.searchValues,t=e.type,a=e.inputValue;if(0!==this.tempData.length&&""!==a){var n=a.toLowerCase(),r=this.tempData.filter(function(e){var a=e[t];return"string"===typeof a?a.toLowerCase().includes(n):Array.isArray(a)?a.find(function(e){return e.toLowerCase().includes(n)}):"[object Object]"===a.toString()?Object.values(a).find(function(e){return e.toLowerCase().includes(n)}):void 0});this.tempData=r}},getCurrPageData:function(){var e=this.pagination,t=(e.total,e.current),a=e.pageSize,n=(t-1)*a||0,r=t*a||10;this.tempData=this.tempData.slice(n,r)},handleDATA:function(){var e=this;this.handleClearSelected(),this.tempData=this.allData,this.handleFilterByStatus(),this.handleFilterByInput(),this.pagination=Object.assign({},this.pagination,{total:this.tempData.length}),this.getCurrPageData(),this.loading=!0,setTimeout(function(){e.data=e.tempData,e.loading=!1,e.handleFetchSuccess()},100)},fetch:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(){var t,a,n=arguments;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:{},this.loading=!0,this.handleClearSelected(),t=this.payload||{},e.prev=4,e.next=7,this.getList(t);case 7:a=e.sent,a.data.forEach(function(e){if(e.id&&(e.shortID=e.id.substring(0,8)),e.createDate){var t=e.createDate;e.timestamp=Object(r["d"])(t)}e.status&&(e.status=e.status.toLowerCase()),Object.keys(e).forEach(function(t){var a=e[t],n="无";[null,void 0,""].includes(a)&&(e[t]=n),a&&Array.isArray(a)&&0===a.length&&(e[t]=[])})}),this.allData=this.handleParseData?this.handleParseData(a.data):a.data,this.handleDATA(),e.next=16;break;case 13:e.prev=13,e.t0=e["catch"](4),404===e.t0.response.status&&(this.data=[]);case 16:return e.prev=16,this.loading=!1,e.finish(16);case 19:case"end":return e.stop()}},e,this,[[4,13,16,19]])}));function t(){return e.apply(this,arguments)}return t}(),handleFetchSuccess:function(){},handleTableChange:function(e,t,a){this.pagination=Object.assign({},this.pagination,e),this.handleDATA()},onTableSelectChange:function(e){this.selectedRowKeys=e},handleClearSelected:function(){this.selectedRowKeys=[]},handleMultiMenuClick:function(e){0!==this.selectedRowKeys.length?this.handleShowModal(e):this.$message.info("请先选择您要操作的".concat(this.name||"数据"))},handleSingleMenuClick:function(e,t){this.currRecord=t,this.handleShowModal(e)},handleShowModal:function(e){this.$store.commit("".concat(this.id,"/toggleModalVisible"),e)},getSearchData:function(){}}}},"48e1":function(e,t,a){"use strict";var n=a("8760"),r=a.n(n);r.a},"504c":function(e,t,a){var n=a("0d58"),r=a("6821"),i=a("52a7").f;e.exports=function(e){return function(t){var a,o=r(t),s=n(o),l=s.length,c=0,u=[];while(l>c)i.call(o,a=s[c++])&&u.push(e?[a,o[a]]:o[a]);return u}}},"58cd":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[4===e.$route.matched.length?a("router-view"):a("page-layout",[a("div",{attrs:{slot:"header"},slot:"header"},[a("p",[e._v("友普云系统为每个用户提供了一个缺省安全组default,其允许所有下行端口,拒绝所有上行端口.您可以创建自己的安全组。初始状态下安全组任何端口都是封闭的，您需要建立规则以打开相应的端口,达到正常访问的目的.")])]),a("div",{staticClass:"content"},[a("div",{staticClass:"table-operator",staticStyle:{"margin-bottom":"16px"}},[a("a-row",{attrs:{type:"flex",justify:"space-between"}},[a("a-col",[a("a-row",{attrs:{type:"flex",justify:"space-between"}},[a("a-button",{staticStyle:{"margin-right":"10px"},attrs:{icon:"sync",disabled:e.loading,title:"刷新"},on:{click:e.handleRefresh}}),a("a-button",{staticStyle:{"margin-right":"10px"},attrs:{type:"primary",icon:"plus"},on:{click:function(t){e.handleSingleMenuClick("create")}}},[e._v("\n                创建安全组\n              ")]),a("a-button",{staticStyle:{"margin-right":"10px"},attrs:{type:"danger",icon:"delete",disabled:!e.selectedRowKeys.length},on:{click:function(t){e.handleMultiMenuClick("multiDeleta")}}},[e._v("\n                删除安全组\n              ")])],1)],1),a("a-col",[a("a-row",{attrs:{type:"flex",justify:"space-between"}})],1)],1)],1),a("a-alert",{staticStyle:{"margin-bottom":"16px"},attrs:{type:"info",showIcon:""}},[a("div",{attrs:{slot:"message"},slot:"message"},[e._v("\n          已选择 \n          "),a("a",{staticStyle:{"font-weight":"600"}},[e._v(e._s(e.selectedRowKeys.length))]),e._v("  项\n          "),a("a",{staticStyle:{"margin-left":"24px"},on:{click:e.handleClearSelected}},[e._v("清空")])])]),a("a-table",{attrs:{rowSelection:{selectedRowKeys:e.selectedRowKeys,onChange:e.onTableSelectChange},columns:e.columns,rowKey:function(e){return e.id},dataSource:e.data,pagination:e.pagination,loading:e.loading},on:{change:e.handleTableChange},scopedSlots:e._u([{key:"operation",fn:function(t,n){return[a("a-dropdown",[a("a-menu",{attrs:{slot:"overlay"},on:{click:function(t){e.handleSingleMenuClick(t.key,n)}},slot:"overlay"},e._l(n.singleMenuOptions,function(t){return a("a-menu-item",{key:t.id},[e._v("\n                "+e._s(t.name)+"\n              ")])}),1),a("a-button",[e._v("\n              操作\n              "),a("a-icon",{attrs:{type:"down"}})],1)],1)]}}])})],1)]),a("create-modal"),a("delete-modal"),a("edit-modal"),a("multi-delete")],1)},r=[],i=a("2909"),o=(a("ac6a"),a("7f7f"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("a-modal",{attrs:{visible:e.visible,confirmLoading:e.confirmLoading,title:"创建安全组",okText:"创建"},on:{cancel:e.handleCancel,ok:e.handleCreate}},[a("a-form",{attrs:{form:e.form}},[a("a-form-item",{attrs:{label:"名称",labelCol:e.formItemLayout.labelCol,wrapperCol:e.formItemLayout.wrapperCol}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["secGroupName",{rules:[{required:!0,message:"请输入名称!"},e.rulesObj.name]}],expression:"[\n            'secGroupName',\n            {\n              rules: [\n                { required: true, message: '请输入名称!' },\n                rulesObj.name,\n              ]\n            }\n          ]"}]})],1),a("a-form-item",{attrs:{label:"描述",labelCol:e.formItemLayout.labelCol,wrapperCol:e.formItemLayout.wrapperCol}},[a("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["description",{rules:[e.rulesObj.desc]}],expression:"[\n            'description',\n            {\n              rules: [\n                rulesObj.desc,\n              ]\n            }\n          ]"}],attrs:{placeholder:"请填写描述"}})],1)],1)],1)],1)}),s=[],l=a("e0ae"),c=a("14ff"),u=a("0792"),d={mixins:[l["a"],l["b"]],data:function(){return{rulesObj:u["a"],fetchAPI:c["b"],name:"create"}},methods:{}},p=d,h=a("2877"),m=Object(h["a"])(p,o,s,!1,null,null,null),f=m.exports,g=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("a-modal",{attrs:{visible:e.visible,confirmLoading:e.confirmLoading,title:"删除安全组",type:"danger",okText:"删除",okType:"danger"},on:{cancel:e.handleCancel,ok:e.handleCreate}},[a("p",{staticStyle:{"margin-top":"10px"}},[e._v("\n      您已经选择安全组“"),a("span",{staticClass:"primay-color"},[e._v(e._s(e.currRecord.name))]),e._v("”。\n      请确认你的操作，该操作不能撤销。\n    ")])])],1)},v=[],b={mixins:[l["a"],l["b"]],data:function(){return{fetchAPI:c["c"],name:"deleGroup"}},methods:{onShow:function(){this.formValues={securityGroupId:this.currRecord.id}}}},y=b,C=(a("0565"),Object(h["a"])(y,g,v,!1,null,"63023fba",null)),w=C.exports,_=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("a-modal",{attrs:{visible:e.visible,confirmLoading:e.confirmLoading,title:"编辑安全组",okText:"确定"},on:{cancel:e.handleCancel,ok:e.handleCreate}},[a("a-form",{attrs:{form:e.form}},[a("a-form-item",{attrs:{label:"名称",labelCol:e.formItemLayout.labelCol,wrapperCol:e.formItemLayout.wrapperCol}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["secGroupName",{initialValue:e.currRecord.name,rules:[{required:!0,message:"请输入名称!"},e.rulesObj.name]}],expression:"[\n            'secGroupName',\n            {\n              initialValue: currRecord.name,\n              rules: [\n                { required: true, message: '请输入名称!' },\n                rulesObj.name,\n              ]\n            }\n          ]"}]})],1),a("a-form-item",{attrs:{label:"描述",labelCol:e.formItemLayout.labelCol,wrapperCol:e.formItemLayout.wrapperCol}},[a("a-textarea",{directives:[{name:"decorator",rawName:"v-decorator",value:["description",{initialValue:e.currRecord.description,rules:[e.rulesObj.desc]}],expression:"[\n            'description',\n            {\n              initialValue: currRecord.description,\n              rules: [\n                rulesObj.desc,\n              ]\n            }\n          ]"}],attrs:{placeholder:"请填写描述"}})],1)],1)],1)],1)},I=[],x={mixins:[l["a"],l["b"]],data:function(){return{rulesObj:u["a"],fetchAPI:c["e"],name:"editGroup"}},methods:{onShow:function(){this.formValues={secGroupId:this.currRecord.id}}}},S=x,L=Object(h["a"])(S,_,I,!1,null,null,null),P=L.exports,R=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("a-modal",{attrs:{visible:e.visible,confirmLoading:e.confirmLoading,title:"删除安全组",okText:"删除",okType:"danger"},on:{cancel:e.handleCancel,ok:e.handleCreate}},[a("a-alert",{attrs:{message:"注意：删除安全组后数据不可恢复（default 系统默认安全组，不允许删除）！",type:"warning",showIcon:""}}),a("p",[e._v("\n      你已经选择了安全组“"+e._s(e.totalList.map(function(e){return e.name}).join(", "))+"”\n    ")]),e.showMyFooter?a("template",{slot:"footer"},[a("a-button",{on:{click:e.handleCancel}},[e._v("取消")])],1):e._e()],2)],1)},T=[],O=(a("96cf"),a("1da1")),k=(a("6762"),a("2fdb"),{mixins:[l["a"],l["b"]],data:function(){return{fetchAPI:c["c"],name:"multiDeleta",loop:!0,totalList:[],showMyFooter:!1}},methods:{onShow:function(){this.showMyFooter=!1;var e=this.$parent,t=e.data,a=e.selectedRowKeys;this.totalList=t.filter(function(e){return a.includes(e.id)}),1===this.totalList.length&&this.totalList.some(function(e){return"default"===e.name})&&(this.showMyFooter=!0),this.list=this.totalList.filter(function(e){return"default"!==e.name}),this.handleItemCount=this.list.length},handleItemFetch:function(){var e=Object(O["a"])(regeneratorRuntime.mark(function e(t){var a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,a={securityGroupId:t.id},e.next=4,this.fetchAPI(a);case 4:e.sent,e.next=9;break;case 7:e.prev=7,e.t0=e["catch"](0);case 9:return e.prev=9,this.handleItemCount=this.handleItemCount-1,0===this.handleItemCount&&this.handleLoopFetchEnd(),e.finish(9);case 13:case"end":return e.stop()}},e,this,[[0,7,9,13]])}));function t(t){return e.apply(this,arguments)}return t}()}}),M=k,j=(a("a8d7"),Object(h["a"])(M,R,T,!1,null,"1716bb69",null)),V=j.exports,F=a("d8c3"),D=a("3614"),N={mixins:[D["a"]],components:{CreateModal:f,DeleteModal:w,EditModal:P,MultiDelete:V,PageLayout:F["a"]},data:function(){return{getList:c["f"],module:"security",id:"group",name:"安全组"}},computed:{},methods:{handleSingleMenuClick:function(e,t){"editRule"!==e?(this.currRecord=t,this.handleShowModal(e)):this.$router.push({name:"rules",params:{id:t.id,name:t.name}})},__handleFilterOptions:function(e){var t=e.name;return"default"===t?[{visible:!1,type:"single",id:"editRule",name:"编辑规则"}]:JSON.parse(JSON.stringify(this.singleMenuOptions))},handleParseData:function(e){var t=this;return e.forEach(function(e){e.singleMenuOptions=Object(i["a"])(t.__handleFilterOptions(e))}),e}}},$=N,q=(a("94e5"),Object(h["a"])($,n,r,!1,null,"dd43e34c",null));t["default"]=q.exports},"599a":function(e,t,a){"use strict";var n=a("eb59"),r=a.n(n);r.a},"6b3e":function(e,t,a){},8615:function(e,t,a){var n=a("5ca1"),r=a("504c")(!1);n(n.S,"Object",{values:function(e){return r(e)}})},8760:function(e,t,a){},"8b74":function(e,t,a){},"94e5":function(e,t,a){"use strict";var n=a("8b74"),r=a.n(n);r.a},a4c7:function(e,t,a){},a5c5:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("page-layout",[a("div",{staticClass:"content"},[a("div",{staticClass:"table-operator",staticStyle:{"margin-bottom":"16px"}},[a("a-row",{attrs:{type:"flex",justify:"space-between"}},[a("a-col",[a("a-row",{attrs:{type:"flex",justify:"space-between"}},[a("a-button",{staticStyle:{"margin-right":"10px"},attrs:{icon:"sync",disabled:e.loading,title:"刷新"},on:{click:e.handleRefresh}}),a("a-button",{staticStyle:{"margin-right":"10px"},attrs:{type:"primary",icon:"plus"},on:{click:function(t){e.handleSingleMenuClick("create")}}},[e._v("\n                添加规则、\n              ")]),a("a-button",{staticStyle:{"margin-right":"10px"},attrs:{type:"danger",icon:"delete",disabled:!e.selectedRowKeys.length},on:{click:function(t){e.handleMultiMenuClick("multiDeleta")}}},[e._v("\n                删除规则\n              ")])],1)],1),a("a-col",[a("a-row",{attrs:{type:"flex",justify:"space-between"}})],1)],1)],1),a("a-alert",{staticStyle:{"margin-bottom":"16px"},attrs:{type:"info",showIcon:""}},[a("div",{attrs:{slot:"message"},slot:"message"},[e._v("\n          已选择 \n          "),a("a",{staticStyle:{"font-weight":"600"}},[e._v(e._s(e.selectedRowKeys.length))]),e._v("  项\n          "),a("a",{staticStyle:{"margin-left":"24px"},on:{click:e.handleClearSelected}},[e._v("清空")])])]),a("a-table",{attrs:{rowSelection:{selectedRowKeys:e.selectedRowKeys,onChange:e.onTableSelectChange},columns:e.columns,rowKey:function(e){return e.id},dataSource:e.data,pagination:e.pagination,loading:e.loading},on:{change:e.handleTableChange},scopedSlots:e._u([{key:"operation",fn:function(t,n){return[a("a-button",{staticStyle:{"margin-right":"10px"},attrs:{type:"danger",icon:"delete"},on:{click:function(t){e.handleSingleMenuClick("delete",n)}}},[e._v("\n            删除规则\n          ")])]}}])})],1)]),a("create-modal"),a("delete-modal"),a("multi-delete")],1)},r=[],i=(a("f751"),a("ac6a"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("a-modal",{attrs:{visible:e.visible,confirmLoading:e.confirmLoading,title:"添加规则",okText:"添加"},on:{cancel:e.handleCancel,ok:e.handleCreate}},[a("a-form",{staticClass:"create-modal-form",attrs:{form:e.form}},[a("a-form-item",{attrs:{labelCol:{span:8},wrapperCol:{span:14},label:"规则"}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["protocol",{initialValue:0,rules:[{required:!0,message:"请选择规则！"}]}],expression:"[\n            'protocol',\n            {\n              initialValue: 0,\n              rules: [{ required: true, message: '请选择规则！' }]\n            }\n          ]"}],attrs:{getPopupContainer:e.getPopupContainer,placeholder:"请选择规则！"},on:{change:e.handleChangeRuleType}},e._l(e.procotol,function(t){return a("a-select-option",{key:t.value,attrs:{value:t.value}},[e._v("\n            "+e._s(t.label)+"\n          ")])}),1)],1),e.createFormVisible[e.ruleType]["direction"]?[a("a-form-item",{attrs:{labelCol:{span:8},wrapperCol:{span:14},label:"方向"}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["direction",{initialValue:"ingress",rules:[{required:!0,message:"请选择方向！"}]}],expression:"[\n              'direction',\n              {\n                initialValue: 'ingress',\n                rules: [{ required: true, message: '请选择方向！' }]\n              }\n            ]"}],attrs:{placeholder:"请选择方向！"}},[a("a-select-option",{attrs:{value:"ingress"}},[e._v("入口")]),a("a-select-option",{attrs:{value:"egress"}},[e._v("出口")])],1)],1)]:e._e(),e.createFormVisible[e.ruleType]["ipName"]?a("a-form-item",{attrs:{label:"IP协议",labelCol:e.formItemLayout.labelCol,wrapperCol:e.formItemLayout.wrapperCol}},[a("div",{staticClass:"item-wrap"},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["ipName",{rules:[{required:!0,message:"请输入IP协议!"}]}],expression:"[\n              'ipName',\n              {\n                rules: [\n                  { required: true, message: '请输入IP协议!' },\n                ]\n              }\n            ]"}]}),e._v("\n           \n          "),a("a-tooltip",{attrs:{placement:"top"}},[a("template",{slot:"title"},[a("span",[e._v("请输入一个介于-1和255之间的整数（-1表示使用通配符）。")])]),a("a-icon",{attrs:{type:"info-circle"}})],2)],1)]):e._e(),e.createFormVisible[e.ruleType]["port"]?[a("a-form-item",{attrs:{labelCol:{span:8},wrapperCol:{span:14},label:"端口类型"}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["portType",{initialValue:e.portType,rules:[{required:!0,message:"请选择端口类型！"}]}],expression:"[\n              'portType',\n              {\n                initialValue: portType,\n                rules: [{ required: true, message: '请选择端口类型！' }]\n              }\n            ]"}],attrs:{placeholder:"请选择端口类型！"},on:{change:function(t){return e.portType=t}}},[a("a-select-option",{attrs:{value:1}},[e._v("端口")]),a("a-select-option",{attrs:{value:2}},[e._v("端口范围")])],1)],1),1===e.portType?a("a-form-item",{attrs:{label:"端口号",labelCol:e.formItemLayout.labelCol,wrapperCol:e.formItemLayout.wrapperCol}},[a("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["portNumber",{rules:[{required:!0,message:"请输入端口号!"}]}],expression:"[\n              'portNumber',\n              {\n                rules: [\n                  { required: true, message: '请输入端口号!' },\n                ]\n              }\n            ]"}],attrs:{min:1,max:65535}})],1):e._e(),2===e.portType?a("a-form-item",{attrs:{label:"起始端口号",labelCol:e.formItemLayout.labelCol,wrapperCol:e.formItemLayout.wrapperCol}},[a("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["portRangeMin",{rules:[{required:!0,message:"请输入起始端口号!"}]}],expression:"[\n              'portRangeMin',\n              {\n                rules: [\n                  { required: true, message: '请输入起始端口号!' },\n                ]\n              }\n            ]"}],attrs:{min:1,max:65535}})],1):e._e(),2===e.portType?a("a-form-item",{attrs:{label:"终止端口号",labelCol:e.formItemLayout.labelCol,wrapperCol:e.formItemLayout.wrapperCol}},[a("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["portRangeMax",{rules:[{required:!0,message:"请输入终止端口号!"}]}],expression:"[\n              'portRangeMax',\n              {\n                rules: [\n                  { required: true, message: '请输入终止端口号!' },\n                ]\n              }\n            ]"}],attrs:{min:1,max:65535}})],1):e._e()]:e._e(),e.createFormVisible[e.ruleType]["type"]?a("a-form-item",{attrs:{label:"类型",labelCol:e.formItemLayout.labelCol,wrapperCol:e.formItemLayout.wrapperCol}},[a("div",{staticClass:"item-wrap"},[a("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["portRangeMin",{rules:[{required:!0,message:"请输入类型!"}]}],expression:"[\n              'portRangeMin',\n              {\n                rules: [\n                  { required: true, message: '请输入类型!' },\n                ]\n              }\n            ]"}],attrs:{min:-1,max:255}}),e._v("\n           \n          "),a("a-tooltip",{attrs:{placement:"top"}},[a("template",{slot:"title"},[a("span",[e._v("请输入ICMP类型值范围 (-1: 255)")])]),a("a-icon",{attrs:{type:"info-circle"}})],2)],1)]):e._e(),e.createFormVisible[e.ruleType]["encoding"]?a("a-form-item",{attrs:{label:"编码",labelCol:e.formItemLayout.labelCol,wrapperCol:e.formItemLayout.wrapperCol}},[a("div",{staticClass:"item-wrap"},[a("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["portRangeMax",{rules:[{required:!0,message:"请输入编码!"}]}],expression:"[\n              'portRangeMax',\n              {\n                rules: [\n                  { required: true, message: '请输入编码!' },\n                ]\n              }\n            ]"}],attrs:{min:-1,max:255}}),e._v("\n           \n          "),a("a-tooltip",{attrs:{placement:"top"}},[a("template",{slot:"title"},[a("span",[e._v("请输入ICMP代码范围 (-1: 255)")])]),a("a-icon",{attrs:{type:"info-circle"}})],2)],1)]):e._e(),a("a-form-item",{attrs:{labelCol:{span:8},wrapperCol:{span:14},label:"远程"}},[a("div",{staticClass:"item-wrap"},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["remote",{initialValue:e.remote,rules:[{required:!0,message:"请选择远程！"}]}],expression:"[\n              'remote',\n              {\n                initialValue: remote,\n                rules: [{ required: true, message: '请选择远程！' }]\n              }\n            ]"}],attrs:{placeholder:"请选择远程！"},on:{change:e.handleChangeRemoteType}},[a("a-select-option",{attrs:{value:"cidr"}},[e._v("CIDR")]),a("a-select-option",{attrs:{value:"group"}},[e._v("安全组")])],1),e._v("\n           \n          "),a("a-tooltip",{attrs:{placement:"top"}},[a("template",{slot:"title"},[a("span",[e._v('选择"CIDR"以指定允许来访的IP地址范围。如欲允许来自另一安全组所有成员的访问，请选择"安全组"。')])]),a("a-icon",{attrs:{type:"info-circle"}})],2)],1)]),"group"===e.remote?a("a-form-item",{attrs:{labelCol:{span:8},wrapperCol:{span:14},label:"安全组"}},[a("a-spin",{attrs:{spinning:e.isFetchGroupList}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["remoteGroupId",{rules:[{required:!0,message:"请选择安全组！"}]}],expression:"[\n              'remoteGroupId',\n              {\n                rules: [{ required: true, message: '请选择安全组！' }]\n              }\n            ]"}],attrs:{placeholder:"请选择安全组！"}},e._l(e.groupList,function(t){return a("a-select-option",{key:t.id,attrs:{value:t.id}},[e._v("\n              "+e._s(t.name)+"\n            ")])}),1)],1)],1):e._e(),"group"===e.remote?a("a-form-item",{attrs:{labelCol:{span:8},wrapperCol:{span:14},label:"IP类型"}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["etherType",{initialValue:"IPv4",rules:[{required:!0,message:"请选择IP类型！"}]}],expression:"[\n            'etherType',\n            {\n              initialValue: 'IPv4',\n              rules: [{ required: true, message: '请选择IP类型！' }]\n            }\n          ]"}],attrs:{placeholder:"请选择IP类型！"}},[a("a-select-option",{attrs:{value:"IPv4"}},[e._v("IPv4")]),a("a-select-option",{attrs:{value:"IPv6"}},[e._v("IPv6")])],1)],1):e._e(),"cidr"===e.remote?a("a-form-item",{staticClass:"a-form-item",attrs:{label:"CIDR",labelCol:e.formItemLayout.labelCol,wrapperCol:e.formItemLayout.wrapperCol}},[a("div",{staticClass:"item-wrap"},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["remoteIpPrefix",{rules:[{required:!0,message:"请输入CIDR!"}]}],expression:"[\n              'remoteIpPrefix',\n              {\n                rules: [\n                  { required: true, message: '请输入CIDR!' },\n                ]\n              }\n            ]"}]}),e._v("\n           \n          "),a("a-tooltip",{attrs:{placement:"top"}},[a("template",{slot:"title"},[a("span",[e._v("无类别域间路由标记(CIDR, 例如 192.168.0.0/24，或者2001:db8::/128)")])]),a("a-icon",{attrs:{type:"info-circle"}})],2)],1)]):e._e(),a("h4",{staticStyle:{"font-weight":"bold","font-size":"18px"}},[e._v("描述：")]),a("p",[e._v("\n        实例可以关联安全组，组中的规则定义了允许哪些访问到达被关联的实例。安全组由以下三个主要组件组成：\n      ")]),a("p",[a("strong",[e._v("规则：")]),e._v(" 您可以指定期望的规则模板或者使用定制规则，选项有定制TCP规则、定制UDP规则或定制ICMP规则。\n      ")]),a("p",[a("strong",[e._v("打开端口/端口范围：")]),e._v(' 您选择的TCP和UDP规则可能会打开一个或一组端口.选择"端口范围"，您需要提供开始和结束端口的范围.对于ICMP规则您需要指定ICMP类型和代码.\n      ')]),a("p",[a("strong",[e._v("远程：")]),e._v(" 您必须指定允许通过该规则的流量来源。可以通过以下两种方式实现：IP地址块(CIDR)或者来源地址组(安全组)。如果选择一个安全组作为来访源地址，则该安全组中的任何实例都被允许使用该规则访问任一其它实例。\n      ")])],2)],1)],1)}),o=[],s=(a("96cf"),a("1da1")),l=(a("7514"),a("e0ae")),c=a("14ff"),u=a("0792"),d={custom:{direction:!0,port:!0,remote:!0},icmp:{direction:!0,type:!0,encoding:!0,remote:!0},other:{direction:!0,ipName:!0,remote:!0},all:{direction:!0,remote:!0},assign:{remote:!0}},p=d,h={mixins:[l["a"],l["b"]],data:function(){return{rulesObj:u["a"],fetchAPI:c["a"],name:"create",procotol:[{value:0,label:"定制TCP规则"},{value:1,label:"定制UDP规则"},{value:2,label:"定制ICMP规则"},{value:3,label:"其他协议"},{value:5,label:"ALL TCP"},{value:6,label:"ALL UDP"},{value:4,label:"ALL ICMP"},{value:9,label:"HTTPS"},{value:8,label:"HTTP"},{value:7,label:"DNS"},{value:18,label:"SMTP"},{value:19,label:"SMTPS"},{value:15,label:"POP3"},{value:16,label:"POP3S"},{value:12,label:"LDAP"},{value:14,label:"MYSQL"},{value:13,label:"MS SQL"},{value:17,label:"RDP"},{value:20,label:"SSH"},{value:10,label:"IMAP"},{value:11,label:"IMAPS"}],remote:"cidr",portType:1,groupList:[],isFetchGroupList:!1,createFormVisible:p,ruleType:"custom"}},methods:{onShow:function(){this.fetchGroupList(),Object.assign(this,{ruleType:"custom",remote:"cidr",portType:1})},handleChangeRuleType:function(e){if(3==e)this.ruleType="other";else if(2==e)this.ruleType="icmp";else{var t=[{reg:/定制/,type:"custom"},{reg:/ALL/,type:"all"},{reg:/./,type:"assign"}],a=this.procotol.find(function(t){return t.value===e}).label;this.ruleType=t.find(function(e){return e.reg.test(a)})["type"]}},handleChangeRemoteType:function(e){this.remote=e},fetchGroupList:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.isFetchGroupList=!0,e.prev=1,e.next=4,Object(c["f"])();case 4:t=e.sent,this.groupList=t.data,this.isFetchGroupList=!1,e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](1),this.$message.error("请求失败");case 12:case"end":return e.stop()}},e,this,[[1,9]])}));function t(){return e.apply(this,arguments)}return t}(),handleFormValues:function(){this.createFormVisible[this.ruleType].port&&1===this.portType&&(this.formValues.portRangeMax=this.formValues.portRangeMin=this.formValues.portNumber,delete this.formValues.portNumber),delete this.formValues.remote,delete this.formValues.portType,this.formValues.securityGroupId=this.$parent.payload.secGroupId},handleCreate:function(){var e=this;this.form.validateFieldsAndScroll(function(t,a){t||(e.formValues=Object.assign({},e.formValues,a),e.handleFormValues(),e.handleFetch())})},getPopupContainer:function(){return document.querySelector(".create-modal-form")}}},m=h,f=(a("48e1"),a("2877")),g=Object(f["a"])(m,i,o,!1,null,"1e4bb1a8",null),v=g.exports,b=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("a-modal",{attrs:{visible:e.visible,confirmLoading:e.confirmLoading,title:"删除规则",type:"danger",okText:"删除",okType:"danger"},on:{cancel:e.handleCancel,ok:e.handleCreate}},[a("p",{staticStyle:{"margin-top":"10px"}},[e._v("即将删除规则 "+e._s(e.currRecord.id)+"，请确认你的操作。")])])],1)},y=[],C={mixins:[l["a"],l["b"]],data:function(){return{fetchAPI:c["d"],name:"delete"}},methods:{onShow:function(){this.formValues={ruleId:this.currRecord.id}}}},w=C,_=Object(f["a"])(w,b,y,!1,null,null,null),I=_.exports,x=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("a-modal",{attrs:{visible:e.visible,confirmLoading:e.confirmLoading,title:"删除规则",type:"danger",okText:"删除",okType:"danger"},on:{cancel:e.handleCancel,ok:e.handleCreate}},[a("p",{staticStyle:{"margin-top":"10px"}},[e._v("即将删除安全组“"+e._s(e.groupName)+"”的 "+e._s(e.list.length)+" 条规则，该操作不可逆，请确认你的操作。")])])],1)},S=[],L=(a("6762"),a("2fdb"),a("7f7f"),{mixins:[l["a"],l["b"]],data:function(){return{fetchAPI:c["d"],name:"multiDeleta",loop:!0,groupName:""}},methods:{onShow:function(){this.groupName=this.$route.params.name;var e=this.$parent,t=e.data,a=e.selectedRowKeys;this.list=t.filter(function(e){return a.includes(e.id)}),this.handleItemCount=this.list.length},handleItemFetch:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(t){var a;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,a={ruleId:t.id},e.next=4,this.fetchAPI(a);case 4:e.sent,e.next=9;break;case 7:e.prev=7,e.t0=e["catch"](0);case 9:return e.prev=9,this.handleItemCount=this.handleItemCount-1,0===this.handleItemCount&&this.handleLoopFetchEnd(),e.finish(9);case 13:case"end":return e.stop()}},e,this,[[0,7,9,13]])}));function t(t){return e.apply(this,arguments)}return t}()}}),P=L,R=Object(f["a"])(P,x,S,!1,null,null,null),T=R.exports,O=a("d8c3"),k={rule:{status:{egress:"出口",ingress:"入口"}}},M=a("3614"),j=k.rule.status,V={mixins:[M["a"]],components:{CreateModal:v,MultiDelete:T,DeleteModal:I,PageLayout:O["a"]},data:function(){return{getList:c["g"],module:"security",id:"rules",name:"管理安全组规则"}},beforeMount:function(){var e=this.$route.params.id;this.payload={secGroupId:e}},methods:{__handleTransformToZh:function(e){return j[e.toLowerCase()]||e},handleParseData:function(e){var t=this;return e.forEach(function(e){var a,n=e.portRangeMax,r=e.portRangeMin,i=e.protocol,o=e.portProtocol;a=n===r?"无"===n?"任何":n+("无"!==o&&"tcp"===i?"(".concat(o,")"):""):r+" - "+("无"===n?"None":n);var s=t.__handleTransformToZh(e.direction);Object.assign(e,{portScope:a,direction_zh:s,protocol:"无"===e.protocol?"任何":e.protocol,remoteIpPrefix:"无"===e.remoteIpPrefix?"任何":e.remoteIpPrefix})}),e}}},F=V,D=(a("e92d"),Object(f["a"])(F,n,r,!1,null,"7426c6da",null));t["default"]=D.exports},a8d7:function(e,t,a){"use strict";var n=a("a4c7"),r=a.n(n);r.a},b691:function(e,t,a){},ce7b:function(e,t,a){},d8c3:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",[a("page-header",[e._t("header")],2),a("a-layout-content",{staticClass:"page-content"},[e._t("default")],2)],1)},r=[],i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"page-header"},[a("div",{staticClass:"page-header-detail"},[a("div",{staticClass:"title"},[a("h1",[e._v(e._s(e.title))])]),a("div",{staticClass:"desc"},[e._t("default")],2)])])},o=[],s={name:"",components:{},computed:{},created:function(){this.getTitle()},data:function(){return{title:""}},methods:{getTitle:function(){var e=this.$route.matched;this.title=e.length>2?e[2].meta.title:this.$route.meta.title}}},l=s,c=(a("200b"),a("2877")),u=Object(c["a"])(l,i,o,!1,null,null,null),d=u.exports,p={name:"",components:{PageHeader:d},computed:{},data:function(){return{}},methods:{}},h=p,m=(a("599a"),Object(c["a"])(h,n,r,!1,null,null,null));t["a"]=m.exports},e0ae:function(e,t,a){"use strict";a.d(t,"a",function(){return i}),a.d(t,"b",function(){return o});a("f751"),a("ac6a"),a("96cf");var n=a("1da1"),r=a("ade3"),i=(a("7f7f"),{data:function(){return{module:"",bodyStyle:{"max-height":"400px",overflow:"auto"},radioStyle:{display:"block",height:"30px",lineHeight:"30px"},confirmLoading:!1,formValues:{},currRecord:{},fetchAPI:function(){},isRefreshParentTable:!0,loop:!1,list:[],handleItemCount:0}},computed:{visible:function(){var e=this.$store.getters["".concat(this.$parent.id,"/getVisibleById")](this.name);return e}},watch:{visible:function(e,t){e?(this.currRecord=this.$parent.currRecord||{},this.formValues={},this.form&&this.form.resetFields(),this.bindId(),this.onShow()):(this.form&&this.form.resetFields(),this.onHidden())}},methods:{bindId:function(){},onShow:function(){},onHidden:function(){},onInputNumberChange:function(e,t){var a=Object(r["a"])({},t,parseInt(e));this.form.setFieldsValue(a)},handleCancel:function(){this.$store.commit("".concat(this.$parent.id,"/toggleModalVisible"),this.name)},handleCreate:function(){this.handleFetch()},handleFetch:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(!this.loop){e.next=3;break}return this.handleLoopFetchStart(),e.abrupt("return",!1);case 3:return this.confirmLoading=!0,e.prev=4,e.next=7,this.fetchAPI(this.formValues);case 7:t=e.sent,this.handleFetchSuccess(t),e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](4),this.handleFetchFailed(e.t0);case 14:return e.prev=14,this.confirmLoading=!1,e.finish(14);case 17:case"end":return e.stop()}},e,this,[[4,11,14,17]])}));function t(){return e.apply(this,arguments)}return t}(),handleFetchSuccess:function(e){this.handleCancel(),this.openNotification(e),this.handleRefreshParentTable()},handleFetchFailed:function(e){},handleRefreshParentTable:function(){this.isRefreshParentTable&&this.$parent.handleRefresh()},openNotification:function(e){this.$message.success(e.desc||"操作成功")},formatter:function(e,t){return parseInt(t)+" "+e},parser:function(e){return parseInt(e)},handleLoopFetchStart:function(){var e=this;this.list.length&&this.handleItemCount&&(this.confirmLoading=!0,this.list.forEach(function(t){e.handleItemFetch(t)}))},handleLoopFetchEnd:function(){this.confirmLoading=!1,this.$message.success("操作完成"),this.handleRefreshParentTable(),this.handleCancel()},handleItemFetch:function(){var e=Object(n["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.fetchAPI(t);case 3:e.sent,e.next=8;break;case 6:e.prev=6,e.t0=e["catch"](0);case 8:return e.prev=8,this.handleItemCount=this.handleItemCount-1,0===this.handleItemCount&&this.handleLoopFetchEnd(),e.finish(8);case 12:case"end":return e.stop()}},e,this,[[0,6,8,12]])}));function t(t){return e.apply(this,arguments)}return t}()}}),o={data:function(){return{formItemLayout:{labelCol:{span:8},wrapperCol:{span:14}},form:null}},created:function(){var e=this;this.form=this.$form.createForm(this,{onFieldsChange:function(t,a){e.onFieldsChange(t,a)},onValuesChange:function(t,a,n){e.onValuesChange(t,a,n)}})},methods:{onValuesChange:function(e,t,a){},onFieldsChange:function(){},handleCreate:function(){var e=this;this.form.validateFieldsAndScroll(function(t,a){t||(e.formValues=Object.assign({},e.formValues,a),e.handleFetch())})}}}},e92d:function(e,t,a){"use strict";var n=a("ce7b"),r=a.n(n);r.a},eb59:function(e,t,a){}}]);
//# sourceMappingURL=expense.754b7c7a.js.map